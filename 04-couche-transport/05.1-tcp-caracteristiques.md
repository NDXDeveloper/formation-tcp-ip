ğŸ” Retour au [Sommaire](/SOMMAIRE.md)

# 4.5.1 CaractÃ©ristiques : fiabilitÃ©, ordre, contrÃ´le

## Introduction

TCP se distingue fondamentalement d'UDP par trois caractÃ©ristiques essentielles qui en font le protocole de choix pour la majoritÃ© des applications rÃ©seau. Ces trois piliers - **fiabilitÃ©**, **ordre** et **contrÃ´le** - travaillent ensemble pour transformer un rÃ©seau intrinsÃ¨quement peu fiable en un canal de communication robuste et prÃ©visible.

Dans cette section, nous allons explorer en profondeur chacune de ces caractÃ©ristiques, comprendre leurs mÃ©canismes sous-jacents et voir comment elles s'appliquent dans des scÃ©narios rÃ©els.

## 1. FiabilitÃ© (Reliable Delivery)

### 1.1 Le principe fondamental

La fiabilitÃ© dans TCP signifie une garantie absolue : **toutes les donnÃ©es envoyÃ©es seront reÃ§ues, sans perte, sans corruption, ou l'expÃ©diteur en sera informÃ©**.

Cette garantie repose sur plusieurs mÃ©canismes complÃ©mentaires :

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     MÃ‰CANISMES DE FIABILITÃ‰ TCP              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                              â”‚
â”‚  1. NumÃ©rotation des segments (SEQ)          â”‚
â”‚  2. Acquittements (ACK)                      â”‚
â”‚  3. Checksums (dÃ©tection d'erreurs)          â”‚
â”‚  4. Retransmissions (correction d'erreurs)   â”‚
â”‚  5. Timers (dÃ©tection de perte)              â”‚
â”‚                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 NumÃ©rotation des octets (Sequence Numbers)

TCP ne se contente pas de numÃ©roter les segments - il numÃ©rote **chaque octet** de donnÃ©es transmis. C'est une dÃ©cision architecturale fondamentale qui permet une gestion prÃ©cise des donnÃ©es.

**Exemple concret** : Envoi du mot "BONJOUR" (7 octets)

```
DonnÃ©es Ã  envoyer : B O N J O U R

NumÃ©rotation TCP :
Position dans le flux : 1000 1001 1002 1003 1004 1005 1006
Octet :                  B    O    N    J    O    U    R

Segment TCP :
- NumÃ©ro de sÃ©quence (SEQ) = 1000
- Longueur des donnÃ©es = 7 octets
- Prochain octet attendu = 1007
```

### 1.3 MÃ©canisme d'acquittement (ACK)

Le rÃ©cepteur confirme la rÃ©ception en envoyant un **numÃ©ro d'acquittement** qui indique le **prochain octet attendu** (et non le dernier reÃ§u).

**Fonctionnement dÃ©taillÃ©** :

```
Ã‰metteur                                    RÃ©cepteur
   |                                            |
   | Segment SEQ=1000, 100 octets de donnÃ©es    |
   |â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>  |
   |                                            |
   |                                         âœ“ ReÃ§u octets 1000-1099
   |                                         âœ“ Prochain attendu : 1100
   |                                            |
   |                   ACK=1100                 |
   |<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  |
   |                                            |
   âœ“ Confirmation : octets 1000-1099 bien reÃ§us
```

**ACK=1100 signifie** : "J'ai bien reÃ§u tous les octets jusqu'Ã  1099 inclus, j'attends maintenant l'octet 1100"

### 1.4 Acquittements cumulatifs

TCP utilise des **acquittements cumulatifs** : un seul ACK peut confirmer la rÃ©ception de plusieurs segments.

**Exemple** :

```
Ã‰metteur                                    RÃ©cepteur
   |                                            |
   | SEQ=100, 50 octets                         |
   |â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>  |
   |                                            | âœ“ ReÃ§u 100-149
   |                                            |
   | SEQ=150, 50 octets                         |
   |â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>  |
   |                                            | âœ“ ReÃ§u 150-199
   |                                            |
   | SEQ=200, 50 octets                         |
   |â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>  |
   |                                            | âœ“ ReÃ§u 200-249
   |                                            |
   |              ACK=250                       |
   |<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  |
   |                                            |
   âœ“ Un seul ACK confirme les 3 segments !
```

**Avantage** : RÃ©duit le trafic d'acquittement (moins de segments ACK Ã  envoyer).

### 1.5 DÃ©tection et correction d'erreurs

#### Checksum TCP

Chaque segment TCP contient un **checksum** (somme de contrÃ´le) calculÃ© sur :
- L'en-tÃªte TCP complet
- Les donnÃ©es
- Un pseudo-en-tÃªte IP (contenant IP source et destination)

```
Calcul du checksum :
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Pseudo-en-tÃªte IP  â”‚  (IP src, IP dst, protocole)
â”‚  En-tÃªte TCP        â”‚
â”‚  DonnÃ©es            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    [Calcul checksum]
         â”‚
         â–¼
    Checksum 16 bits
```

**DÃ©tection d'erreur** :

```
RÃ©cepteur reÃ§oit un segment :
1. Recalcule le checksum
2. Compare avec le checksum reÃ§u
3. Si diffÃ©rent â†’ segment corrompu â†’ ignorÃ© (pas d'ACK)
4. Si identique â†’ segment valide â†’ traitement normal
```

### 1.6 Retransmission sur perte

Si un segment est perdu ou corrompu, TCP le retransmet automatiquement grÃ¢ce Ã  un systÃ¨me de **timers**.

**ScÃ©nario de retransmission** :

```
Temps    Ã‰metteur                              RÃ©cepteur
  â”‚
  0      | SEQ=100, 100 octets                |
         |â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> |
         |                                    |
         | âŒ Segment perdu dans le rÃ©seau    |
         |                                    |
         | [DÃ©marre timer de retransmission]  |
         |                                    |
 100ms   |                                    |
         |                                    |
 200ms   |                                    |
         |                                    |
 300ms   | â° Timeout ! Pas d'ACK reÃ§u        |
         | Retransmission SEQ=100             |
         |â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> |
         |                                    | âœ“ ReÃ§u
         |              ACK=200               |
         |<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ |
         | âœ“ AcquittÃ© !                       |
```

### 1.7 Exemple complet de transmission fiable

Envoyons un fichier de 300 octets avec des segments de 100 octets :

```
Phase 1 : Transmission normale
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Ã‰metteur                                    RÃ©cepteur
   |                                            |
   | SEQ=1000, 100 octets [0-99]                |
   |â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>  |
   |                                            | âœ“ Buffer: [0-99]
   |              ACK=1100                      |
   |<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  |
   |                                            |
   | SEQ=1100, 100 octets [100-199]             |
   |â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€X perdu                   |
   |                                            |
   | SEQ=1200, 100 octets [200-299]             |
   |â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>  |
   |                                            | âœ“ ReÃ§u mais en attente
   |              ACK=1100 (duplicate)          |  (manque 1100-1199)
   |<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  |
   |                                            |

Phase 2 : Retransmission
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   | â° Timeout dÃ©tectÃ©                         |
   | SEQ=1100, 100 octets [100-199] (retr.)     |
   |â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>  |
   |                                            | âœ“ Trou comblÃ© !
   |                                            | âœ“ Peut livrer [0-299]
   |              ACK=1300                      |
   |<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  |
   |                                            |
   âœ“ Transmission complÃ¨te et fiable !
```

### 1.8 Retransmission rapide (Fast Retransmit)

TCP ne se contente pas d'attendre le timeout. Il utilise les **ACK dupliquÃ©s** comme signal de perte.

**RÃ¨gle** : Si 3 ACK dupliquÃ©s sont reÃ§us â†’ perte probable â†’ retransmission immÃ©diate

```
Ã‰metteur                                    RÃ©cepteur
   |                                            |
   | SEQ=100 (100 octets)                       |
   |â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>  |
   |              ACK=200                       | âœ“ ReÃ§u 100-199
   |<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  |
   |                                            |
   | SEQ=200 (100 octets)                       |
   |â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€X perdu                       |
   |                                            |
   | SEQ=300 (100 octets)                       |
   |â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>  |
   |              ACK=200 (dup 1)               | âš ï¸ Manque 200-299
   |<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  |
   |                                            |
   | SEQ=400 (100 octets)                       |
   |â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>  |
   |              ACK=200 (dup 2)               | âš ï¸ Toujours absent
   |<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  |
   |                                            |
   | SEQ=500 (100 octets)                       |
   |â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>  |
   |              ACK=200 (dup 3)               | ğŸš¨ 3e duplicate !
   |<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  |
   |                                            |
   | ğŸš€ Fast Retransmit SEQ=200                 |
   |â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>  |
   |              ACK=600                       | âœ“ Tout reÃ§u !
   |<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  |
```

**Avantage** : RÃ©cupÃ©ration beaucoup plus rapide qu'attendre le timeout (quelques ms au lieu de centaines de ms).

## 2. Ordre (Ordered Delivery)

### 2.1 Le problÃ¨me du dÃ©sordonnancement

Sur Internet, les paquets peuvent emprunter des routes diffÃ©rentes et arriver dans le dÃ©sordre.

**Exemple rÃ©el** : Envoi d'un email de Paris Ã  New York

```
Serveur Paris                                Serveur New York
     |                                             |
     | Paquet 1 : "Bonjour, "                      |
     |â”€â”€â”€ Route A (via Londres) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> |
     |     (latence 50ms)                          |
     |                                             |
     | Paquet 2 : "comment "                       |
     |â”€â”€â”€ Route B (via cÃ¢ble direct) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> |
     |     (latence 20ms) âš¡                       |
     |                                             |
     | Paquet 3 : "allez-vous ?"                   |
     |â”€â”€â”€ Route C (via satellite) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>|
     |     (latence 100ms) ğŸ›°ï¸                      |

Ordre d'arrivÃ©e : Paquet 2 â†’ Paquet 1 â†’ Paquet 3
Sans TCP : "comment Bonjour, allez-vous ?" âŒ
Avec TCP : "Bonjour, comment allez-vous ?" âœ“
```

### 2.2 RÃ©ordonnancement par numÃ©ros de sÃ©quence

TCP utilise les numÃ©ros de sÃ©quence pour remettre les donnÃ©es dans l'ordre correct, quelle que soit leur ordre d'arrivÃ©e.

**MÃ©canisme dÃ©taillÃ©** :

```
Ã‰tat du buffer de rÃ©ception :

Attendu : SEQ=1000
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Buffer vide                           â”‚
â”‚  Prochain octet attendu : 1000         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Arrive : SEQ=1100 (100 octets) - EN AVANCE
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [vide 1000-1099]  [donnÃ©es 1100-1199] â”‚
â”‚                    â†‘ stockÃ© en attente â”‚
â”‚  Prochain attendu : toujours 1000      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Arrive : SEQ=1000 (100 octets) - LE BON
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [donnÃ©es 1000-1099] [donnÃ©es 1100-1199]â”‚
â”‚   â†‘ reÃ§u            â†‘ dÃ©jÃ  en buffer    â”‚
â”‚  Peut livrer 1000-1199 Ã  l'application  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 Exemple complet avec rÃ©ordonnancement

Envoi d'un message "HELLO WORLD" dÃ©coupÃ© en 3 segments :

```
Ã‰metteur envoie dans l'ordre :
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Segment 1 : SEQ=100, "HELLO" (5 octets)
Segment 2 : SEQ=105, " WORL" (5 octets)
Segment 3 : SEQ=110, "D" (1 octet)


ArrivÃ©e au rÃ©cepteur (dÃ©sordonnÃ©e) :
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Temps 0 : Arrive Segment 3 (SEQ=110, "D")
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Attendu: 100                            â”‚
â”‚ Buffer: [____] [____] [D]               â”‚
â”‚         100    105    110               â”‚
â”‚ ACK envoyÃ©: 100 (j'attends toujours)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Temps 1 : Arrive Segment 1 (SEQ=100, "HELLO")
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Buffer: [HELLO] [____] [D]               â”‚
â”‚         100     105    110               â”‚
â”‚ ACK envoyÃ©: 105 (j'ai 100-104 maintenant)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Temps 2 : Arrive Segment 2 (SEQ=105, " WORL")
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Buffer: [HELLO] [ WORL] [D]             â”‚
â”‚         100     105     110             â”‚
â”‚ âœ“ SÃ©quence complÃ¨te 100-110 !           â”‚
â”‚ ACK envoyÃ©: 111                         â”‚
â”‚ Livraison Ã  l'application: "HELLO WORLD"â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.4 Gestion des trous (Gaps)

TCP maintient une **liste des trous** dans le buffer de rÃ©ception pour savoir quelles donnÃ©es manquent.

```
Ã‰tat du buffer avec plusieurs trous :

ReÃ§u : SEQ=0-99, 200-299, 500-599

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [DonnÃ©es] [TROU] [DonnÃ©es] [TROU] [DonnÃ©es]  â”‚
â”‚  0-99     100-199 200-299  300-499 500-599   â”‚
â”‚   âœ“       âŒ      âœ“        âŒ      âœ“         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Trous identifiÃ©s :
- 100-199 (100 octets manquants)
- 300-499 (200 octets manquants)

Actions :
- Envoie ACK=100 (demande les octets manquants)
- Stocke 200-299 et 500-599 en attente
- L'application ne reÃ§oit rien encore (ordre strict)
```

### 2.5 DÃ©lai de rÃ©ordonnancement

Le rÃ©ordonnancement introduit un dÃ©lai car TCP doit **attendre** les segments manquants.

**Impact sur la latence** :

```
ScÃ©nario 1 : ArrivÃ©e ordonnÃ©e
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Temps 0 : SEQ=0 arrive   â†’ LivrÃ© immÃ©diatement
Temps 1 : SEQ=100 arrive â†’ LivrÃ© immÃ©diatement
Temps 2 : SEQ=200 arrive â†’ LivrÃ© immÃ©diatement

Latence de livraison : Minimale âœ“


ScÃ©nario 2 : ArrivÃ©e dÃ©sordonnÃ©e
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Temps 0 : SEQ=200 arrive â†’ StockÃ© en attente
Temps 1 : SEQ=0 arrive   â†’ LivrÃ© + livraison partielle
Temps 2 : SEQ=100 arrive â†’ Livraison complÃ¨te

Latence de livraison : AugmentÃ©e âš ï¸
(Temps 2 au lieu de Temps 0 pour SEQ=200)
```

Ce phÃ©nomÃ¨ne s'appelle **Head-of-Line Blocking** : les donnÃ©es suivantes sont bloquÃ©es en attendant les donnÃ©es manquantes.

## 3. ContrÃ´le (Flow Control & Congestion Control)

Le contrÃ´le dans TCP englobe deux mÃ©canismes distincts mais complÃ©mentaires :
- **ContrÃ´le de flux** (Flow Control) : protÃ¨ge le rÃ©cepteur
- **ContrÃ´le de congestion** (Congestion Control) : protÃ¨ge le rÃ©seau

### 3.1 ContrÃ´le de flux (Flow Control)

#### 3.1.1 Le problÃ¨me

Un Ã©metteur rapide peut **submerger** un rÃ©cepteur lent, causant des pertes de donnÃ©es.

```
Ã‰metteur rapide (1 Gbps)     RÃ©cepteur lent (100 Mbps)
        |                            |
        |==== DonnÃ©es Ã  1 Gbps ====> |
        |                            | ğŸ’¥ Buffer plein !
        |                            | ğŸ’¥ Pertes de donnÃ©es
```

#### 3.1.2 La solution : la fenÃªtre de rÃ©ception

Le rÃ©cepteur annonce une **fenÃªtre de rÃ©ception** (Receive Window, rwnd) qui indique combien d'octets il peut encore accepter.

```
En-tÃªte TCP :
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ...                            â”‚
â”‚ Window Size : 65535 octets     â”‚ â† FenÃªtre annoncÃ©e
â”‚ ...                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Signification : "Tu peux m'envoyer jusqu'Ã  65535 octets
                 sans attendre d'ACK"
```

#### 3.1.3 Fonctionnement dynamique

La fenÃªtre Ã©volue en fonction de l'Ã©tat du buffer du rÃ©cepteur.

```
RÃ©cepteur                              Ã‰metteur
   |                                      |
   | Buffer: [____________________]       |
   | Libre: 64 Ko                         |
   | ACK, Window=65536                    |
   |<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€|
   |                                      |
   |                                  âœ“ Peut envoyer 64 Ko
   |                                      |
   |                    DonnÃ©es 32 Ko     |
   |<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€|
   |                                      |
   | Buffer: [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ________]       |
   | Libre: 32 Ko                         |
   | ACK, Window=32768                    |
   |â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>|
   |                                      |
   |                                  âš ï¸ Ne peut envoyer que 32 Ko
   |                                      |
   | Application lit 16 Ko                |
   | Buffer: [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ________________]   |
   | Libre: 48 Ko                         |
   | ACK, Window=49152                    |
   |â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>|
   |                                      |
   |                                  âœ“ Peut envoyer 48 Ko
```

#### 3.1.4 FenÃªtre nulle (Zero Window)

Cas extrÃªme : le buffer du rÃ©cepteur est plein.

```
RÃ©cepteur                              Ã‰metteur
   |                                      |
   | Buffer: [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ]       |
   | Libre: 0 Ko                          |
   | ACK, Window=0 âš ï¸                     |
   |â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>|
   |                                      |
   |                                  ğŸ›‘ ArrÃªt complet de l'envoi
   |                                  â° DÃ©marre timer de sonde
   |                                      |
   | Application lit des donnÃ©es          |
   | Buffer: [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ____________]       |
   | Libre: 32 Ko                         |
   |                                      |
   |          Window Update: Window=32768 |
   |â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>|
   |                                      |
   |                                  âœ“ Reprise de l'envoi
```

### 3.2 ContrÃ´le de congestion (Congestion Control)

#### 3.2.1 Le problÃ¨me

Trop de donnÃ©es dans le rÃ©seau causent de la **congestion** : files d'attente pleines dans les routeurs, pertes de paquets, augmentation de la latence.

```
Routeur intermÃ©diaire :

File d'attente normale :
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [P1] [P2] [P3]      â”‚  âœ“ Traitement fluide
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

File d'attente congestionnÃ©e :
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [P1][P2][P3][P4][P5]â”‚  âš ï¸ File qui se remplit
â”‚ [P6][P7][P8][P9]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FULL ! [P10] âŒ     â”‚  ğŸ’¥ Paquets perdus
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.2.2 La solution : la fenÃªtre de congestion

TCP maintient une **fenÃªtre de congestion** (cwnd) qui limite le dÃ©bit selon l'Ã©tat estimÃ© du rÃ©seau.

```
FenÃªtre d'envoi effective = min(rwnd, cwnd)
                            â”‚     â”‚     â”‚
                            â”‚     â”‚     â””â”€ FenÃªtre de congestion (rÃ©seau)
                            â”‚     â””â”€â”€â”€â”€â”€â”€â”€ FenÃªtre de rÃ©ception (dest.)
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  Le minimum des deux
```

#### 3.2.3 Slow Start (dÃ©marrage lent)

TCP commence prudemment avec une petite fenÃªtre et **l'augmente exponentiellement** jusqu'Ã  dÃ©tecter de la congestion.

```
Phase de Slow Start :

Temps    cwnd      Segments    Explication
         (MSS)     envoyÃ©s
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 0       1         1           DÃ©marrage prudent
 RTT     2         2           Double Ã  chaque RTT
 2Ã—RTT   4         4           Croissance exponentielle
 3Ã—RTT   8         8           TrÃ¨s rapide
 4Ã—RTT   16        16
 5Ã—RTT   32        32
 6Ã—RTT   64        64
 ...     ...       ...

Graphique :
cwnd
 â”‚
64â”‚                     â•±
32â”‚               â•±
16â”‚         â•±
 8â”‚    â•±
 4â”‚  â•±
 2â”‚ â•±
 1â”‚â•±
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> Temps (RTT)
   0  1  2  3  4  5  6
```

**MSS** (Maximum Segment Size) : Taille maximale d'un segment TCP (gÃ©nÃ©ralement 1460 octets).

#### 3.2.4 DÃ©tection de congestion

TCP dÃ©tecte la congestion via deux signaux :

1. **Timeout** : Pas d'ACK reÃ§u â†’ congestion sÃ©vÃ¨re
2. **3 ACK dupliquÃ©s** : Perte dÃ©tectÃ©e â†’ congestion lÃ©gÃ¨re

```
DÃ©tection et rÃ©action :

ScÃ©nario 1 : Timeout
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Ã‰tat : cwnd = 64 MSS
  â†“
Timeout dÃ©tectÃ© ! ğŸš¨
  â†“
RÃ©action drastique :
- cwnd = 1 MSS (retour au dÃ©but)
- ssthresh = 32 MSS (seuil = cwnd/2)
- RedÃ©marre slow start


ScÃ©nario 2 : 3 ACK dupliquÃ©s
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Ã‰tat : cwnd = 64 MSS
  â†“
3 dup ACK dÃ©tectÃ©s âš ï¸
  â†“
RÃ©action modÃ©rÃ©e :
- cwnd = 32 MSS (division par 2)
- ssthresh = 32 MSS
- Continue en congestion avoidance
```

#### 3.2.5 Congestion Avoidance (Ã©vitement de congestion)

AprÃ¨s avoir atteint le seuil (ssthresh), TCP passe en mode **croissance linÃ©aire** au lieu d'exponentielle.

```
Ã‰volution de cwnd :

cwnd
 â”‚
 â”‚                    â•±â”€â”€ Congestion Avoidance (linÃ©aire)
 â”‚                  â•±
 â”‚                â•±
64â”‚              â•±
 â”‚             â•±
 â”‚           â•±â”€â”€â”€ Slow Start (exponentiel)
 â”‚         â•±
 â”‚       â•±
32â”‚     â•±â•± â† ssthresh (seuil)
 â”‚   â•±â•±
 â”‚ â•±â•±
 â”‚â•±
 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> Temps
```

**En congestion avoidance** :
- cwnd augmente de **1 MSS par RTT** (au lieu de doubler)
- Augmentation prudente pour dÃ©tecter la congestion avant qu'elle ne soit sÃ©vÃ¨re

#### 3.2.6 Cycle complet de contrÃ´le de congestion

Voici le cycle de vie typique d'une connexion TCP :

```
cwnd
 â”‚
 â”‚   Perte (timeout)
 â”‚        â”‚
 â”‚        â†“
64â”‚      â•±â•²â•±â”€â”€â”€â”€â”€â”€â•® Perte (3 dup ACK)
 â”‚     â•±  â•±       â”‚     â†“
 â”‚    â•±  â•±        â•°â”€â”€â”€â•²
32â”‚   â•±  â•± â† ssthresh   â•²
 â”‚  â•±  â•±                â•²
 â”‚ â•±  â•±                  â•²â•±â”€â”€â”€
 â”‚â•±  â•±
 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> Temps

LÃ©gende :
â•±  = Slow Start (exponentiel)
â”€  = Congestion Avoidance (linÃ©aire)
â•²  = RÃ©duction aprÃ¨s perte
```

### 3.3 Exemple complet de contrÃ´le

**ScÃ©nario** : Transfert d'un fichier de 100 Mo sur une connexion avec RTT=100ms

```
Phase 1 : DÃ©marrage (Slow Start)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
RTT 1 : cwnd=1 MSS â†’ 1 segment envoyÃ©
RTT 2 : cwnd=2 MSS â†’ 2 segments envoyÃ©s
RTT 3 : cwnd=4 MSS â†’ 4 segments envoyÃ©s
RTT 4 : cwnd=8 MSS â†’ 8 segments envoyÃ©s
...
RTT 10 : cwnd=512 MSS â†’ 512 segments envoyÃ©s

DÃ©bit atteint : ~750 Mbps


Phase 2 : Congestion Avoidance
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
RTT 11 : cwnd=513 MSS (ssthresh atteint)
RTT 12 : cwnd=514 MSS
RTT 13 : cwnd=515 MSS
...
Croissance lente et stable


Phase 3 : DÃ©tection de perte
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
RTT 20 : 3 ACK dupliquÃ©s dÃ©tectÃ©s âš ï¸
Action : cwnd = cwnd/2 = 260 MSS
DÃ©bit rÃ©duit Ã  ~380 Mbps


Phase 4 : RÃ©cupÃ©ration
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Retransmission rapide du segment perdu
Reprise en congestion avoidance
Augmentation progressive vers dÃ©bit optimal
```

### 3.4 Interaction entre contrÃ´le de flux et de congestion

Les deux mÃ©canismes travaillent ensemble pour dÃ©terminer le dÃ©bit effectif.

```
Calcul de la fenÃªtre d'envoi :

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                      â”‚
â”‚  FenÃªtre de rÃ©ception (rwnd)         â”‚
â”‚  â””â”€> AnnoncÃ©e par le rÃ©cepteur       â”‚
â”‚  â””â”€> Limite : capacitÃ© du buffer     â”‚
â”‚                                      â”‚
â”‚           min(rwnd, cwnd)            â”‚
â”‚                 â”‚                    â”‚
â”‚  FenÃªtre de congestion (cwnd)        â”‚
â”‚  â””â”€> CalculÃ©e par l'Ã©metteur         â”‚
â”‚  â””â”€> Limite : capacitÃ© du rÃ©seau     â”‚
â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
  FenÃªtre d'envoi effective
```

**Exemple pratique** :

```
Situation 1 : RÃ©cepteur limitant
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
rwnd = 32 Ko (rÃ©cepteur lent)
cwnd = 128 Ko (rÃ©seau OK)
FenÃªtre = min(32, 128) = 32 Ko
â†’ DÃ©bit limitÃ© par le rÃ©cepteur


Situation 2 : RÃ©seau limitant
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
rwnd = 128 Ko (rÃ©cepteur rapide)
cwnd = 16 Ko (rÃ©seau congestionnÃ©)
FenÃªtre = min(128, 16) = 16 Ko
â†’ DÃ©bit limitÃ© par le rÃ©seau


Situation 3 : Ã‰quilibrÃ©
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
rwnd = 64 Ko
cwnd = 64 Ko
FenÃªtre = min(64, 64) = 64 Ko
â†’ Utilisation optimale
```

## Impact des caractÃ©ristiques TCP sur les performances

### Compromis et limitations

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CARACTÃ‰RISTIQUE  â”‚  AVANTAGE  â”‚  COÃ›T      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  FiabilitÃ©        â”‚  Pas de    â”‚  Retrans-  â”‚
â”‚                   â”‚  perte     â”‚  missions  â”‚
â”‚                   â”‚            â”‚  = dÃ©lais  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Ordre            â”‚  DonnÃ©es   â”‚  Head-of-  â”‚
â”‚                   â”‚  correctes â”‚  line      â”‚
â”‚                   â”‚            â”‚  blocking  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ContrÃ´le flux    â”‚  ProtÃ¨ge   â”‚  Limite    â”‚
â”‚                   â”‚  rÃ©cepteur â”‚  dÃ©bit     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ContrÃ´le         â”‚  ProtÃ¨ge   â”‚  Slow      â”‚
â”‚  congestion       â”‚  rÃ©seau    â”‚  start     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Cas d'usage optimaux

**TCP est excellent pour** :
- âœ… Transfert de fichiers (FTP, HTTP)
- âœ… Emails (SMTP, IMAP)
- âœ… Pages web (HTTP/HTTPS)
- âœ… Transactions financiÃ¨res
- âœ… Bases de donnÃ©es

**TCP est sous-optimal pour** :
- âŒ Streaming vidÃ©o en direct (tolÃ©rance Ã  la perte)
- âŒ VoIP (latence prioritaire)
- âŒ Jeux en ligne (latence critique)
- âŒ DNS (requÃªtes courtes)
- âŒ IoT Ã  faible bande passante (overhead trop Ã©levÃ©)

## Conclusion

Les trois caractÃ©ristiques fondamentales de TCP - **fiabilitÃ©, ordre et contrÃ´le** - en font un protocole robuste et polyvalent, adaptÃ© Ã  la grande majoritÃ© des communications rÃ©seau.

**Points clÃ©s Ã  retenir** :

1. **FiabilitÃ©** :
   - NumÃ©rotation de chaque octet
   - Acquittements cumulatifs
   - Retransmissions automatiques (timeout et fast retransmit)
   - Checksums pour dÃ©tecter les corruptions

2. **Ordre** :
   - RÃ©ordonnancement transparent basÃ© sur les numÃ©ros de sÃ©quence
   - Gestion des trous dans le buffer
   - Livraison strictement ordonnÃ©e Ã  l'application
   - PossibilitÃ© de head-of-line blocking

3. **ContrÃ´le** :
   - **ContrÃ´le de flux** : fenÃªtre de rÃ©ception (rwnd) pour protÃ©ger le destinataire
   - **ContrÃ´le de congestion** : fenÃªtre de congestion (cwnd) pour protÃ©ger le rÃ©seau
   - Slow start et congestion avoidance pour optimiser le dÃ©bit
   - Adaptation dynamique aux conditions du rÃ©seau

Ces mÃ©canismes complexes fonctionnent en arriÃ¨re-plan, de maniÃ¨re transparente pour les applications, permettant aux dÃ©veloppeurs de se concentrer sur la logique mÃ©tier sans se soucier des dÃ©tails de la transmission rÃ©seau.

Dans les sections suivantes, nous approfondirons chacun de ces mÃ©canismes en explorant le format des segments TCP, le handshake de connexion, et tous les algorithmes qui font de TCP le protocole de transport dominant d'Internet.

---

**Prochaine section** : 4.5.2 Format du segment TCP

â­ï¸ [Format du segment TCP](/04-couche-transport/05.2-tcp-format-segment.md)
