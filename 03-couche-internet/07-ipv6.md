ğŸ” Retour au [Sommaire](/SOMMAIRE.md)

# 3.7 IPv6 : pourquoi, comment, structure des adresses

## Introduction : l'inÃ©vitable Ã©volution

Imaginez que vous vivez dans une ville oÃ¹ il n'existe que **4,3 milliards de numÃ©ros de tÃ©lÃ©phone possibles**. Au dÃ©but, cela semblait amplement suffisant. Mais avec le temps, de plus en plus de gens arrivent, chacun veut plusieurs tÃ©lÃ©phones (fixe, mobile, tablette, montre connectÃ©e...), et soudain, vous rÃ©alisez : **il n'y a plus de numÃ©ros disponibles** !

C'est exactement ce qui s'est passÃ© avec IPv4. Dans les annÃ©es 1980, 4,3 milliards d'adresses semblaient infinies. Aujourd'hui, nous avons Ã©puisÃ© ces adresses, et malgrÃ© le NAT qui nous permet de "tricher" temporairement, nous avons besoin d'une **vraie solution Ã  long terme**.

Cette solution, c'est **IPv6** (Internet Protocol version 6).

## Pourquoi IPv6 ? Les limites d'IPv4

### Le problÃ¨me de la pÃ©nurie

```
IPv4 : 2^32 = 4 294 967 296 adresses (~4,3 milliards)

Mais aujourd'hui :
  â€¢ ~8 milliards d'humains sur Terre
  â€¢ ~15 milliards d'appareils connectÃ©s
  â€¢ En 2030 : ~50 milliards d'appareils prÃ©vus

4,3 milliards << 50 milliards
â†’ IPv4 ne peut pas suivre ! âŒ
```

### Les solutions temporaires arrivent Ã  bout

**Le NAT a aidÃ©, mais** :
- ComplexitÃ© croissante
- ProblÃ¨mes avec de nombreuses applications
- Violation du principe end-to-end d'Internet
- CoÃ»ts de gestion Ã©levÃ©s

**Autres palliatifs** :
- RÃ©utilisation agressive des adresses
- MarchÃ© noir des adresses IPv4 (oui, Ã§a existe !)
- Carrier-Grade NAT (NAT sur NAT... cauchemar !)

### Les limitations techniques d'IPv4

Au-delÃ  des adresses, IPv4 a d'autres problÃ¨mes :

```
âŒ En-tÃªte complexe : Trop de champs optionnels (ralentit le traitement)
âŒ Pas de sÃ©curitÃ© native : IPsec est optionnel
âŒ Fragmentation coÃ»teuse : Faite par les routeurs intermÃ©diaires
âŒ Configuration manuelle : DHCP nÃ©cessaire
âŒ QualitÃ© de service limitÃ©e : Champ ToS peu efficace
âŒ Broadcast gourmand : Trafic inutile sur les rÃ©seaux
```

## IPv6 : la solution dÃ©finitive

### La crÃ©ation d'IPv6

**Dates clÃ©s** :
```
1990 : DÃ©but des rÃ©flexions sur "IPng" (IP next generation)
1998 : RFC 2460 - SpÃ©cification IPv6
2017 : RFC 8200 - Mise Ã  jour de la spec IPv6
Aujourd'hui : DÃ©ploiement progressif (~40% du trafic mondial)
```

### Le nombre magique : 128 bits

IPv6 utilise des adresses de **128 bits** (au lieu de 32 pour IPv4).

**Combien d'adresses Ã§a fait ?**

```
2^128 = 340 282 366 920 938 463 463 374 607 431 768 211 456 adresses

En notation plus lisible :
340 undÃ©cillions d'adresses
ou
340 sextillions d'adresses
ou
340 suivis de 36 zÃ©ros !
```

### Perspective

Pour comprendre l'immensitÃ© de ce nombre :

```
IPv4 : 4,3 milliards d'adresses
  â†’ ~0,6 adresse par personne sur Terre

IPv6 : 340 undÃ©cillions d'adresses
  â†’ ~50 000 000 000 000 000 000 000 000 000 adresses par personne !
  â†’ Assez pour donner une adresse IP Ã  CHAQUE ATOME
     Ã  la surface de la Terre... et il en resterait encore !
```

**Analogie** : Si IPv4 Ã©tait un verre d'eau, IPv6 serait **tous les ocÃ©ans de la Terre multipliÃ©s par un milliard**.

### Avec IPv6, le NAT devient optionnel !

```
Vision IPv6 :
  Chaque appareil = une adresse IP publique unique
  Connexions directes end-to-end
  Plus besoin de NAT (sauf pour la sÃ©curitÃ©)

Retour aux principes originaux d'Internet !
```

## Structure d'une adresse IPv6

### Format de base

Une adresse IPv6 est composÃ©e de **128 bits** divisÃ©s en **8 groupes de 16 bits** (appelÃ©s "hextets"), sÃ©parÃ©s par des deux-points `:`.

Chaque groupe est Ã©crit en **hexadÃ©cimal** (base 16).

```
Exemple d'adresse IPv6 complÃ¨te :
2001:0db8:85a3:0000:0000:8a2e:0370:7334

8 groupes de 4 chiffres hexadÃ©cimaux
```

### Pourquoi l'hexadÃ©cimal ?

**Binaire** (base 2) : Trop long et illisible
```
00100000000000010000110110111000100001011010001100000000000000000000000000000000100010100010111000000011011100000111001100110100
â†’ 128 caractÃ¨res ! Impossible Ã  lire.
```

**DÃ©cimal** (base 10) : Trop de groupes
```
32.1.13.184.133.163.0.0.0.0.138.46.3.112.115.52
â†’ 16 groupes, toujours pas pratique
```

**HexadÃ©cimal** (base 16) : Compact et lisible
```
2001:0db8:85a3:0000:0000:8a2e:0370:7334
â†’ 8 groupes de 4 caractÃ¨res, bien mieux !
```

### Rappel : l'hexadÃ©cimal

L'hexadÃ©cimal utilise 16 symboles (0-9 et A-F) :

```
â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”
â”‚ Dec â”‚ Hex â”‚ Dec â”‚ Hex â”‚ Dec â”‚ Hex â”‚ Dec â”‚ Hex â”‚
â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
â”‚  0  â”‚  0  â”‚  4  â”‚  4  â”‚  8  â”‚  8  â”‚  12 â”‚  C  â”‚
â”‚  1  â”‚  1  â”‚  5  â”‚  5  â”‚  9  â”‚  9  â”‚  13 â”‚  D  â”‚
â”‚  2  â”‚  2  â”‚  6  â”‚  6  â”‚  10 â”‚  A  â”‚  14 â”‚  E  â”‚
â”‚  3  â”‚  3  â”‚  7  â”‚  7  â”‚  11 â”‚  B  â”‚  15 â”‚  F  â”‚
â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜

Exemples :
FF = 255 (dÃ©cimal) = 11111111 (binaire)
0A = 10 (dÃ©cimal) = 00001010 (binaire)
3C = 60 (dÃ©cimal) = 00111100 (binaire)
```

### Anatomie d'une adresse IPv6

```
2001:0db8:85a3:0000:0000:8a2e:0370:7334
â””â”€â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”˜
  Hextet   Hextet    Hextet    Hextet
  (16 bits)(16 bits) (16 bits) (16 bits)

Total : 8 hextets Ã— 16 bits = 128 bits
```

**Conversion binaire d'un hextet** :

```
Hextet : 2001 (hexadÃ©cimal)

2    0    0    1
â†“    â†“    â†“    â†“
0010 0000 0000 0001 (binaire)

= 16 bits par hextet
```

## RÃ¨gles d'abrÃ©viation IPv6

Les adresses IPv6 peuvent Ãªtre **trÃ¨s longues**. Heureusement, il existe des rÃ¨gles pour les **raccourcir** !

### RÃ¨gle 1 : Suppression des zÃ©ros initiaux

Dans chaque hextet, les **zÃ©ros Ã  gauche** peuvent Ãªtre supprimÃ©s.

```
Avant : 2001:0db8:0001:0000:0000:0000:0000:0001
AprÃ¨s : 2001:db8:1:0:0:0:0:1

Explication :
  0db8 â†’ db8   (on enlÃ¨ve le 0 devant)
  0001 â†’ 1     (on enlÃ¨ve les 00 devant)
  0000 â†’ 0     (il reste un 0)
```

**Attention** : On ne peut pas supprimer **tous** les zÃ©ros d'un hextet. Au minimum, il faut laisser un `0`.

```
âœ… 0000 â†’ 0
âŒ 0000 â†’ (vide)  Interdit !
```

### RÃ¨gle 2 : Compression des zÃ©ros consÃ©cutifs

Une **suite de hextets Ã  zÃ©ro** peut Ãªtre remplacÃ©e par **deux deux-points** `::`.

```
Avant : 2001:0db8:0000:0000:0000:0000:0000:0001
AprÃ¨s : 2001:db8::1

Explication :
  0000:0000:0000:0000 â†’ ::
```

**RÃˆGLE CRITIQUE** : On ne peut utiliser `::` qu'**UNE SEULE FOIS** par adresse !

Pourquoi ? Pour Ã©viter l'ambiguÃ¯tÃ©.

```
Si on avait :
2001::db8::1

Combien de zÃ©ros entre 2001 et db8 ?
Combien de zÃ©ros entre db8 et 1 ?
â†’ Impossible Ã  dÃ©terminer ! AmbiguÃ¯tÃ©.

Donc : :: une seule fois maximum.
```

**Exception** : Si plusieurs groupes de zÃ©ros existent, on comprime le **plus long**.

```
Adresse : 2001:0db8:0000:0000:0000:0000:0042:0001
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€6 zÃ©rosâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â†â”€ Le plus long

RÃ©sultat : 2001:db8::42:1
```

### RÃ¨gle 3 : Combiner les deux rÃ¨gles

On applique d'abord la rÃ¨gle 1, puis la rÃ¨gle 2.

```
Adresse complÃ¨te :
2001:0db8:0000:0000:0000:0000:0000:0001

Ã‰tape 1 : Supprimer les zÃ©ros initiaux
2001:db8:0:0:0:0:0:1

Ã‰tape 2 : Compresser les zÃ©ros consÃ©cutifs
2001:db8::1

âœ… Forme la plus courte !
```

### Exemples d'abrÃ©viation

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Forme complÃ¨te                           â”‚ Forme abrÃ©gÃ©e            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2001:0db8:0000:0000:0000:0000:0000:0001  â”‚ 2001:db8::1              â”‚
â”‚ fe80:0000:0000:0000:0202:b3ff:fe1e:8329  â”‚ fe80::202:b3ff:fe1e:8329 â”‚
â”‚ 2001:0db8:0001:0000:0000:0ab9:c0a8:0102  â”‚ 2001:db8:1::ab9:c0a8:102 â”‚
â”‚ 0000:0000:0000:0000:0000:0000:0000:0001  â”‚ ::1                      â”‚
â”‚ 0000:0000:0000:0000:0000:0000:0000:0000  â”‚ ::                       â”‚
â”‚ ff02:0000:0000:0000:0000:0000:0000:0001  â”‚ ff02::1                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Adresses spÃ©ciales

```
::1
  = Loopback IPv6 (Ã©quivalent de 127.0.0.1 en IPv4)
  = "localhost" en IPv6

::
  = Adresse non spÃ©cifiÃ©e (0.0.0.0 en IPv4)
  = UtilisÃ©e avant qu'une adresse soit assignÃ©e

::ffff:192.0.2.1
  = Adresse IPv4 mappÃ©e en IPv6
  = Permet la compatibilitÃ© IPv4/IPv6
```

## Structure hiÃ©rarchique d'une adresse IPv6

### PrÃ©fixe et identificateur d'interface

Une adresse IPv6 est divisÃ©e en **deux parties** principales :

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   PRÃ‰FIXE RÃ‰SEAU     â”‚  IDENTIFICATEUR      â”‚
â”‚   (Network Prefix)   â”‚  D'INTERFACE         â”‚
â”‚   64 bits            â”‚  (Interface ID)      â”‚
â”‚                      â”‚  64 bits             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    128 bits au total
```

**Analogie IPv4** :

```
IPv4 : 192.168.1.10/24
       â””â”€rÃ©seauâ”€â”˜ â””hÃ´teâ”˜

IPv6 : 2001:db8:abcd:1234::1/64
       â””â”€â”€â”€prÃ©fixeâ”€â”€â”€â”€â”˜ â””interfaceâ”˜
```

### Notation CIDR en IPv6

Comme en IPv4, on utilise la notation **slash** :

```
2001:db8:abcd:1234::1/64
                      â””â”€â”€ 64 bits de prÃ©fixe rÃ©seau
                          64 bits restants pour l'interface
```

**PrÃ©fixes courants** :

```
/64  : Sous-rÃ©seau standard (recommandÃ© pour les LANs)
/48  : Site d'entreprise (permet 65 536 sous-rÃ©seaux /64)
/32  : Allocation FAI
/128 : HÃ´te unique (Ã©quivalent de /32 en IPv4)
```

### HiÃ©rarchie de l'adressage IPv6

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2001:0db8:1234:5678:abcd:ef01:2345:6789/64             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”‚         â”‚         â”‚         â”‚                        â”‚
â”‚  â””â”€3 bitsâ”€â”˜                                             â”‚
â”‚  Global routing prefix (assignÃ© par RIR)                â”‚
â”‚                                                         â”‚
â”‚              â””â”€16 bitsâ”€â”˜                                â”‚
â”‚              Subnet ID (choix de l'organisation)        â”‚
â”‚                                                         â”‚
â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€64 bitsâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                          Interface ID (appareil)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Exemple concret** :

```
Entreprise obtient : 2001:db8::/32

Elle peut crÃ©er des sous-rÃ©seaux :
  Bureau Paris      : 2001:db8:1::/64
  Bureau Lyon       : 2001:db8:2::/64
  Datacenter        : 2001:db8:10::/64
  DMZ               : 2001:db8:100::/64
  ...
  Total : 2^32 sous-rÃ©seaux /64 possibles !
```

## Types d'adresses IPv6

IPv6 dÃ©finit **trois types** d'adresses (plus de broadcast !).

### 1. Unicast : Communication un-Ã -un

**DÃ©finition** : Adresse d'un **seul appareil**. Un paquet envoyÃ© Ã  une adresse unicast est dÃ©livrÃ© Ã  **un seul** destinataire.

**Sous-types** :

#### Global Unicast (2000::/3)

Les adresses **publiques routables** sur Internet.

```
Plage : 2000::/3 Ã  3fff::/3

Reconnaissable : Commence par 2 ou 3

Exemples :
  2001:db8:1234::1      (adresse de documentation)
  2a01:cb00:beef::1     (adresse rÃ©elle possible)
```

**Ã‰quivalent IPv4** : Adresses publiques (ex: 8.8.8.8)

#### Link-Local (fe80::/10)

Adresses **auto-configurÃ©es** automatiquement, valables uniquement sur le **segment local**.

```
Plage : fe80::/10

Reconnaissable : Commence par fe80

Exemple : fe80::1

Utilisation :
  - Communication sur le mÃªme lien (LAN)
  - DÃ©couverte de voisins
  - Auto-configuration
  - Ne traverse JAMAIS un routeur âŒ
```

**Ã‰quivalent IPv4** : 169.254.x.x (APIPA)

**Important** : **Tous les appareils IPv6 ont automatiquement une adresse link-local** dÃ¨s qu'ils ont une interface rÃ©seau active.

#### Unique Local (fc00::/7)

Adresses **privÃ©es** (Ã©quivalent RFC 1918 en IPv4).

```
Plage : fc00::/7 (en pratique : fd00::/8)

Reconnaissable : Commence par fd

Exemple : fd12:3456:789a::1

Utilisation :
  - RÃ©seau interne d'entreprise
  - Communication entre sites via VPN
  - Non routables sur Internet public
```

**Ã‰quivalent IPv4** : 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16

#### Loopback (::1/128)

```
Adresse : ::1

Usage : Interface de bouclage (localhost)

Ã‰quivalent IPv4 : 127.0.0.1
```

### 2. Multicast : Communication un-Ã -plusieurs

**DÃ©finition** : Adresse d'un **groupe d'appareils**. Un paquet envoyÃ© Ã  une adresse multicast est dÃ©livrÃ© Ã  **tous les membres** du groupe.

```
Plage : ff00::/8

Reconnaissable : Commence par ff

Structure : ff<flags><scope>:<group_id>
```

**Exemples courants** :

```
ff02::1   : Tous les nÅ“uds sur le lien local
ff02::2   : Tous les routeurs sur le lien local
ff02::1:2 : Tous les serveurs DHCP
ff05::2   : Tous les routeurs sur le site
```

**Avantage** : Plus efficace que le broadcast IPv4 (qui envoie Ã  tout le monde, mÃªme ceux qui ne sont pas intÃ©ressÃ©s).

### 3. Anycast : Communication au plus proche

**DÃ©finition** : Plusieurs appareils partagent la **mÃªme adresse**. Un paquet envoyÃ© Ã  une adresse anycast est dÃ©livrÃ© au **plus proche** (en termes de routage).

```
Syntaxe : Identique aux adresses unicast
  (c'est le contexte qui dÃ©termine si c'est anycast)

Usage typique :
  - Serveurs DNS (ex: 8.8.8.8 de Google est anycast)
  - CDN (Content Delivery Networks)
  - Load balancing gÃ©ographique
```

**Exemple** :

```
6 serveurs DNS dans le monde avec la mÃªme adresse anycast :
  2001:db8::53 (Paris)
  2001:db8::53 (New York)
  2001:db8::53 (Tokyo)
  2001:db8::53 (Sydney)
  2001:db8::53 (SÃ£o Paulo)
  2001:db8::53 (Le Cap)

Un utilisateur en France qui contacte 2001:db8::53
sera automatiquement routÃ© vers le serveur de Paris !
```

### Comparaison des types

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Type        â”‚ Description                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Unicast     â”‚ 1 expÃ©diteur â†’ 1 destinataire                  â”‚
â”‚ Multicast   â”‚ 1 expÃ©diteur â†’ N destinataires (groupe)        â”‚
â”‚ Anycast     â”‚ 1 expÃ©diteur â†’ 1 destinataire (le + proche)    â”‚
â”‚ Broadcast   â”‚ N'EXISTE PAS en IPv6 ! (remplacÃ© par multicast)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Tableau rÃ©capitulatif des plages IPv6

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Type               â”‚ PrÃ©fixe      â”‚ Usage                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Global Unicast     â”‚ 2000::/3     â”‚ Internet public (routable)  â”‚
â”‚ Link-Local         â”‚ fe80::/10    â”‚ Communication locale        â”‚
â”‚ Unique Local       â”‚ fc00::/7     â”‚ RÃ©seau privÃ© (comme RFC1918)â”‚
â”‚ Loopback           â”‚ ::1/128      â”‚ Localhost                   â”‚
â”‚ Unspecified        â”‚ ::/128       â”‚ Adresse non dÃ©finie         â”‚
â”‚ Multicast          â”‚ ff00::/8     â”‚ Groupes                     â”‚
â”‚ IPv4-mapped IPv6   â”‚ ::ffff:0:0/96â”‚ CompatibilitÃ© IPv4          â”‚
â”‚ Documentation      â”‚ 2001:db8::/32â”‚ Exemples (non routable)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## En-tÃªte IPv6 : simplifiÃ© et efficace

### Comparaison IPv4 vs IPv6

**En-tÃªte IPv4** : 20 octets minimum (jusqu'Ã  60 avec options)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Version, IHL, ToS, Total Length         â”‚  Ligne 1
â”‚ Identification, Flags, Fragment Offset  â”‚  Ligne 2
â”‚ TTL, Protocol, Header Checksum          â”‚  Ligne 3
â”‚ Source IP Address                       â”‚  Ligne 4
â”‚ Destination IP Address                  â”‚  Ligne 5
â”‚ Options (variable)                      â”‚  Ligne 6+
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  13 champs dont certains complexes
```

**En-tÃªte IPv6** : 40 octets **fixe** (pas d'options dans l'en-tÃªte principal)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Version, Traffic Class, Flow Label      â”‚  Ligne 1
â”‚ Payload Length, Next Header, Hop Limit  â”‚  Ligne 2
â”‚ Source IPv6 Address (128 bits)          â”‚  Lignes 3-4
â”‚ Destination IPv6 Address (128 bits)     â”‚  Lignes 5-6
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  8 champs seulement, structure fixe
```

### Simplifications majeures

```
âœ… Pas de checksum d'en-tÃªte
   â†’ LaissÃ© aux couches supÃ©rieures (TCP/UDP)
   â†’ Routeurs plus rapides

âœ… Pas de fragmentation par les routeurs
   â†’ Seule la source peut fragmenter
   â†’ Path MTU Discovery obligatoire

âœ… Taille fixe : 40 octets
   â†’ Traitement plus rapide et prÃ©dictible

âœ… Extension headers
   â†’ Options dÃ©placÃ©es dans des en-tÃªtes sÃ©parÃ©s
   â†’ Ignorables par les routeurs si non concernÃ©s
```

### Nouveaux champs IPv6

**Flow Label** (20 bits) :
```
Identifie un "flux" de paquets nÃ©cessitant un traitement spÃ©cial

Exemple : Flux vidÃ©o en streaming
  Tous les paquets ont le mÃªme Flow Label
  â†’ Le routeur peut les traiter de maniÃ¨re optimisÃ©e
```

**Hop Limit** :
```
Ã‰quivalent du TTL en IPv4
DÃ©crÃ©mentÃ© Ã  chaque routeur
Si = 0, paquet dÃ©truit
```

**Next Header** :
```
Indique ce qui suit l'en-tÃªte IPv6 :
  - TCP (6)
  - UDP (17)
  - ICMPv6 (58)
  - Extension header (variable)
```

## Auto-configuration : SLAAC

Une des **grandes innovations** d'IPv6 : **SLAAC** (Stateless Address Autoconfiguration).

### Le problÃ¨me en IPv4

```
Nouvel appareil sur le rÃ©seau :
  1. N'a pas d'IP
  2. Envoie DHCP Discover en broadcast
  3. Serveur DHCP rÃ©pond
  4. Attribution d'IP, masque, gateway, DNS

Besoin d'un serveur DHCP fonctionnel !
```

### La solution IPv6 : SLAAC

```
Nouvel appareil sur le rÃ©seau IPv6 :
  1. Auto-gÃ©nÃ¨re une adresse link-local (fe80::...)
  2. Ã‰coute les "Router Advertisements" (messages des routeurs)
  3. Construit sa propre adresse globale Ã  partir du prÃ©fixe reÃ§u
  4. C'est tout ! Aucun serveur nÃ©cessaire.
```

**Exemple** :

```
Routeur annonce : "Le prÃ©fixe rÃ©seau est 2001:db8:1234:5678::/64"

Appareil gÃ©nÃ¨re son adresse :
  PrÃ©fixe du rÃ©seau : 2001:db8:1234:5678
  + Interface ID     : (gÃ©nÃ©rÃ© automatiquement)
  = Adresse complÃ¨te : 2001:db8:1234:5678:abcd:ef01:2345:6789/64

L'appareil s'est auto-configurÃ©, sans serveur DHCP !
```

### GÃ©nÃ©ration de l'Interface ID

Deux mÃ©thodes principales :

**1. EUI-64** (basÃ©e sur l'adresse MAC) :

```
Adresse MAC : 00:1A:2B:3C:4D:5E

Transformation :
  1. InsÃ©rer FF:FE au milieu : 00:1A:2B:FF:FE:3C:4D:5E
  2. Inverser le 7Ã¨me bit : 02:1A:2B:FF:FE:3C:4D:5E
  3. Convertir en notation IPv6 : 021a:2bff:fe3c:4d5e

Adresse finale : 2001:db8:1234:5678:021a:2bff:fe3c:4d5e
```

**ProblÃ¨me** : L'adresse MAC est visible â†’ problÃ¨me de confidentialitÃ©.

**2. Privacy Extensions** (RFC 4941) :

```
Interface ID alÃ©atoire et changeant rÃ©guliÃ¨rement

Exemple : 2001:db8:1234:5678:a4b2:c189:d3e4:f567

Avantage : Meilleure confidentialitÃ©
          Difficile de tracker un appareil
```

## Avantages d'IPv6

### 1. Espace d'adressage quasi-illimitÃ©

```
âœ… 340 undÃ©cillions d'adresses
âœ… Fin de la pÃ©nurie
âœ… NAT devient optionnel
âœ… Chaque appareil peut avoir une IP publique unique
```

### 2. Simplification de l'en-tÃªte

```
âœ… Traitement plus rapide par les routeurs
âœ… Moins de latence
âœ… Meilleure performance
```

### 3. Auto-configuration native

```
âœ… SLAAC : pas besoin de serveur DHCP
âœ… Plug-and-play vÃ©ritable
âœ… RÃ©duction de la complexitÃ© de gestion
```

### 4. SÃ©curitÃ© intÃ©grÃ©e

```
âœ… IPsec obligatoire dans la spec d'origine
   (devenu optionnel depuis, mais fortement recommandÃ©)
âœ… Authentification et chiffrement natifs
```

### 5. Meilleure mobilitÃ©

```
âœ… Support natif du Mobile IPv6
âœ… Un appareil peut garder la mÃªme adresse en se dÃ©plaÃ§ant
âœ… IdÃ©al pour les smartphones et IoT
```

### 6. QualitÃ© de Service amÃ©liorÃ©e

```
âœ… Flow Label pour identifier les flux
âœ… Traffic Class pour la priorisation
âœ… Meilleure gestion du trafic temps-rÃ©el (VoIP, vidÃ©o)
```

### 7. Pas de broadcast

```
âœ… RemplacÃ© par multicast
âœ… Moins de trafic inutile
âœ… RÃ©seaux plus efficaces
```

### 8. ExtensibilitÃ©

```
âœ… Extension Headers permettent d'ajouter des fonctionnalitÃ©s
âœ… Sans modifier l'en-tÃªte principal
âœ… Future-proof
```

## Exemples pratiques d'adresses IPv6

### Configuration d'une interface

```bash
# Linux
ip -6 addr show

# RÃ©sultat typique :
eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500
    inet6 2001:db8:1234:5678::1/64 scope global
       valid_lft forever preferred_lft forever
    inet6 fe80::a00:27ff:fe4e:66a1/64 scope link
       valid_lft forever preferred_lft forever
```

**Explication** :
- **Global** : `2001:db8:1234:5678::1/64` - Adresse publique/routable
- **Link** : `fe80::a00:27ff:fe4e:66a1/64` - Adresse link-local

### Ping en IPv6

```bash
# Ping une adresse IPv6
ping6 2001:db8::1

# Ou (sur les systÃ¨mes rÃ©cents)
ping 2001:db8::1

# Ping link-local (nÃ©cessite de spÃ©cifier l'interface)
ping6 fe80::1%eth0
       â””â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”˜
       adresse interface
```

### Connexion SSH en IPv6

```bash
# Format avec crochets pour les adresses IPv6
ssh user@[2001:db8:1234::1]

# Avec port spÃ©cifique
ssh -p 2222 user@[2001:db8:1234::1]
```

### URL avec IPv6

```
Dans un navigateur web :

http://[2001:db8:1234::1]/
https://[2001:db8:1234::1]:8080/page.html

Les crochets [] sont OBLIGATOIRES pour Ã©viter
la confusion avec les deux-points du port.
```

## RÃ©sumÃ© visuel complet

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   IPv6 - CONCEPTS CLÃ‰S                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            â”‚
â”‚  ğŸ¯ Raison d'Ãªtre : Remplacer IPv4 (pÃ©nurie d'adresses)    â”‚
â”‚                                                            â”‚
â”‚  ğŸ“Š Taille : 128 bits (vs 32 bits pour IPv4)               â”‚
â”‚     â†’ 340 undÃ©cillions d'adresses !                        â”‚
â”‚                                                            â”‚
â”‚  ğŸ“ Notation : HexadÃ©cimal, 8 hextets, sÃ©parÃ©s par :       â”‚
â”‚     Exemple : 2001:0db8:85a3::8a2e:0370:7334               â”‚
â”‚                                                            â”‚
â”‚  âœ‚ï¸ AbrÃ©viation :                                          â”‚
â”‚     â€¢ Supprimer zÃ©ros initiaux : 0db8 â†’ db8                â”‚
â”‚     â€¢ Compresser zÃ©ros consÃ©cutifs : :: (1 fois max)       â”‚
â”‚                                                            â”‚
â”‚  ğŸ  Structure : PrÃ©fixe /64 + Interface ID 64 bits         â”‚
â”‚     2001:db8:1234:5678::1/64                               â”‚
â”‚     â””â”€â”€â”€â”€prÃ©fixeâ”€â”€â”€â”€â”˜â””interfaceâ”˜                           â”‚
â”‚                                                            â”‚
â”‚  ğŸ“‹ Types d'adresses :                                     â”‚
â”‚     â€¢ Unicast : 1 â†’ 1 (2000::/3, fe80::/10, fc00::/7)      â”‚
â”‚     â€¢ Multicast : 1 â†’ N (ff00::/8)                         â”‚
â”‚     â€¢ Anycast : 1 â†’ plus proche                            â”‚
â”‚                                                            â”‚
â”‚  âš™ï¸ Auto-config : SLAAC (pas besoin de DHCP)               â”‚
â”‚                                                            â”‚
â”‚  âœ… Avantages : Espace illimitÃ©, en-tÃªte simplifiÃ©,        â”‚
â”‚     sÃ©curitÃ© native, QoS amÃ©liorÃ©e                         â”‚
â”‚                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Points clÃ©s Ã  retenir

âœ… IPv6 utilise des adresses de **128 bits** (340 undÃ©cillions d'adresses)

âœ… Notation **hexadÃ©cimale** avec **8 hextets** sÃ©parÃ©s par `:`

âœ… **Deux rÃ¨gles d'abrÃ©viation** : supprimer zÃ©ros initiaux, compresser avec `::`

âœ… `::` peut Ãªtre utilisÃ© **une seule fois** par adresse

âœ… **Trois types** d'adresses : Unicast, Multicast, Anycast (pas de broadcast)

âœ… **PrÃ©fixes courants** : 2000::/3 (public), fe80::/10 (link-local), fc00::/7 (privÃ©)

âœ… **En-tÃªte simplifiÃ©** : 40 octets fixes, pas de checksum, plus rapide

âœ… **SLAAC** : auto-configuration sans serveur DHCP

âœ… **::1** = localhost IPv6

âœ… Dans les URLs : utiliser des **crochets** `[2001:db8::1]`

## Comparaison IPv4 vs IPv6

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CaractÃ©ristique     â”‚ IPv4            â”‚ IPv6                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Taille adresse      â”‚ 32 bits         â”‚ 128 bits             â”‚
â”‚ Notation            â”‚ DÃ©cimale pointÃ©eâ”‚ HexadÃ©cimale         â”‚
â”‚ Nombre d'adresses   â”‚ 4,3 milliards   â”‚ 340 undÃ©cillions     â”‚
â”‚ Exemple             â”‚ 192.168.1.1     â”‚ 2001:db8::1          â”‚
â”‚ En-tÃªte             â”‚ 20-60 octets    â”‚ 40 octets (fixe)     â”‚
â”‚ Checksum            â”‚ Oui             â”‚ Non                  â”‚
â”‚ Fragmentation       â”‚ Routeurs        â”‚ Source uniquement    â”‚
â”‚ Broadcast           â”‚ Oui             â”‚ Non (multicast)      â”‚
â”‚ Configuration       â”‚ DHCP/manuelle   â”‚ SLAAC auto           â”‚
â”‚ NAT                 â”‚ Indispensable   â”‚ Optionnel            â”‚
â”‚ SÃ©curitÃ©            â”‚ IPsec optionnel â”‚ IPsec recommandÃ©     â”‚
â”‚ QoS                 â”‚ ToS (limitÃ©)    â”‚ Flow Label + TC      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Pour aller plus loin

Maintenant que vous comprenez IPv6, vous Ãªtes prÃªt Ã  explorer :

- **Coexistence IPv4/IPv6** : techniques de transition (dual-stack, tunneling)
- **ICMPv6** : le nouveau protocole ICMP pour IPv6
- **Neighbor Discovery** : remplacement d'ARP
- **DHCPv6** : alternative Ã  SLAAC quand nÃ©cessaire

---

**ğŸ’¡ VÃ©rification pratique** :
Ouvrez un terminal et tapez :
```bash
# Linux/Mac
ip -6 addr show
# ou
ifconfig

# Windows
ipconfig

Cherchez une ligne commenÃ§ant par "inet6" ou "IPv6 Address"
Vous devriez voir au minimum une adresse link-local (fe80::...)
```

---

*Dans la section suivante, nous allons explorer comment IPv4 et IPv6 coexistent aujourd'hui et les techniques pour faciliter la transition...*

â­ï¸ [Coexistence IPv4/IPv6 : dual-stack, tunneling](/03-couche-internet/08-coexistence-ipv4-ipv6.md)
